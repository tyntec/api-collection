openapi: '3.0.0'
info:
  title: WhatsApp
  description: |
    The Conversations API allows you to easily send messages to your customers via  WhatsApp

    **Channel specific pre-conditions**

    - *WhatsApp* : A WhatsApp Business Account is required in order to use this channel. Please [request access here](https://my.tyntec.com)

    **Product & Product Lists (beta)**

    The support for product and product lists is currently in beta status on our API.

    Please contact us via [WhatsApp](https://wa.me/4989202451100) or [support@tyntec.com](mailto:support@tyntec.com)

  contact:
    name: tyntec API Support
    url: http://www.tyntec.com/support
    email: support@tyntec.com
  version: '3.19'
  x-repository: https://github.com/tyntec/api-collection/blob/master/conversations
  x-specification-file: whatsapp.yaml
  x-major-version: v3
servers:
  - url: https://api.tyntec.com/conversations/v3
security:
  - ApiKeyAuth: []
tags:
  - name: "Messaging"
    description: |
      In this section, we guide you on how to send messages, get information about the status and the events happening
      during delivery.
  - name: "Account management"
    description: |
      Account management grants you access to information about the WhatsApp accounts provisioned to you.

      At the moment, it does not support requesting new WhatsApp accounts or editing existing ones.

      The subresources of a WhatsApp account can *only* be managed by API accounts with the respective scopes.

      Manageable subresources are:

       - templates

      Read access to an account is available for all accounts that are associated with a phone number and thus eligible
      for sending messages.
  - name: "Template management"
    description: |
      Template management enables you to interact with the templates defined for your WhatsApp account.

      You can specify examples for the parameters of each localization. This is advised to increase the chance of
      acceptance of templates. If you use examples, all dynamic parts of the template, like media header or body parameters,
      must be specified.

      It's advised to do this at least for the media templates, as WhatsApp has changed the policies due to abuse of
      media headers to distribute spam / inappropriate content.

      We support creating or deleting templates and adding new localizations to an existing template.

      Due to restrictions by WhatsApp, editing is not supported yet.
  - name: "Phone Number insights"
    description: |
      Phone Number insights allow you to get information about the status of a phone number in your account.

      It also provides *read* access to the templates usable with the phone number.
  - name: "Profile management"
    description: |
      Profile management allows you to read and update the profile settings of your WhatsApp phone numbers.
  - name: "Phone Number Configurations"
    description: |
      List all phone numbers configured as Inbound (aka 2-way) Phone Numbers.
  - name: "Callback configuration"
    description: |
      In this section, we guide you on how to configure the callbacks on a per-channel basis.
  - name: "Flows management"
    description: |
      Flows management enables you to interact with the flows defined for your WhatsApp account.
      The Flows API enables you to perform a variety of operations with Flows, like create flows, update flows, get flows, publish...

paths:
  /messages:
    post:
      operationId: sendMessage
      summary: Send a message
      tags:
        - "Messaging"
      description: Send messages via this path.
      requestBody:
        description: The message you would like to send
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MessageRequest'
            examples:
              WhatsApp Text:
                value:
                  from: a cool business
                  to: some number
                  channel: whatsapp
                  content:
                    contentType: text
                    text: hi there
                  context: my-message-reference
              WhatsApp Image:
                value:
                  from: a cool business
                  to: some number
                  channel: whatsapp
                  content:
                    contentType: image
                    image:
                      url: https://www.my.com/image
                      filename: UHUH.jpeg
                  context: my-message-reference
      responses:
        202:
          $ref: '#/components/responses/MessageResponse'
        400:
          $ref: '#/components/responses/BadRequest'
        403:
          $ref: '#/components/responses/Forbidden'
        default:
          $ref: '#/components/responses/Default'
  /bulks:
    post:
      operationId: sendABulkMessage
      summary: Send a bulk message
      tags:
        - "Messaging"
      description: Send bulk messages. Bulk messages are defined as ordered messages to **one** receiver.
      requestBody:
        description: The message bulk you would like to send
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BulkMessageRequest'
      responses:
        202:
          $ref: '#/components/responses/BulkMessageResponse'
        400:
          $ref: '#/components/responses/BadRequest'
        403:
          $ref: '#/components/responses/Forbidden'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/messages/{message-id}:
    parameters:
      - $ref: '#/components/parameters/MoMessageId'
    put:
      operationId: markWhatsAppMessageAsRead
      summary: Mark a message as read
      description: Marks a previously received WhatsApp message as read
      tags:
        - "Messaging"
      requestBody:
        description: The status change to execute
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WhatsAppMessageStatusUpdate'
      responses:
        200:
          description: Message was successfully marked as read.
        404:
          $ref: '#/components/responses/MoMessageNotFound'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/accounts:
    get:
      parameters:
        - $ref: '#/components/parameters/PhoneNumberQuery'
      operationId: listAllWhatsAppAccounts
      summary: List accounts
      tags:
        - "Account management"
      description: |
        Lists all WhatsApp accounts managed by these access credentials.

        If the phone number query parameter is set, only the phone numbers account is listed.
      responses:
        200:
          description: Returned a list of WhatsApp accounts
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppAccounts'
          headers:
            x-total-pages:
              description: How many pages are available
              schema:
                type: integer
            x-total-items:
              description: How many items are available in total
              schema:
                type: integer
            x-page-size:
              description: The maximum number of items per page
              schema:
                type: integer
            x-current-page:
              description: The current page
              schema:
                type: integer
            Link:
              description: Links describing pagination
              schema:
                properties:
                  rel:
                    $ref: '#/components/schemas/PaginationLinkRelation'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/accounts/{whatsapp-account-id}:
    parameters:
      - $ref: '#/components/parameters/WhatsAppAccountId'
    get:
      operationId: getWhatsAppAccount
      summary: Read an account
      tags:
        - "Account management"
      description: Returns details of a WhatsApp account.
      responses:
        200:
          description: Returned a WhatsApp account
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppAccount'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/accounts/{whatsapp-account-id}/phone-numbers:
    parameters:
      - $ref: '#/components/parameters/WhatsAppAccountId'
    get:
      operationId: listPhoneNumbersOfWhatsAppAccount
      summary: List phone numbers
      tags:
        - "Account management"
      description: Lists all phone numbers of a WhatsApp account.
      responses:
        200:
          description: Returned phone numbers of a WhatsApp account
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppPhoneNumbers'
          headers:
            x-total-pages:
              description: How many pages are available
              schema:
                type: integer
            x-total-items:
              description: How many items are available in total
              schema:
                type: integer
            x-page-size:
              description: The maximum number of items per page
              schema:
                type: integer
            x-current-page:
              description: The current page
              schema:
                type: integer
            Link:
              description: Links describing pagination
              schema:
                properties:
                  rel:
                    $ref: '#/components/schemas/PaginationLinkRelation'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/accounts/{whatsapp-account-id}/templates:
    parameters:
      - $ref: '#/components/parameters/WhatsAppAccountId'
    get:
      operationId: listTemplatesOfWhatsAppAccount
      summary: List templates
      tags:
        - "Template management"
        - "Account management"
      description: Lists all templates of your WhatsApp account.
      responses:
        200:
          description: Returned the templates
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppTemplates'
          headers:
            x-total-pages:
              description: How many pages are available
              schema:
                type: integer
            x-total-items:
              description: How many items are available in total
              schema:
                type: integer
            x-page-size:
              description: The maximum number of items per page
              schema:
                type: integer
            x-current-page:
              description: The current page
              schema:
                type: integer
            Link:
              description: Links describing pagination
              schema:
                properties:
                  rel:
                    $ref: '#/components/schemas/PaginationLinkRelation'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
    post:
      operationId: waSubmitTemplateForReview
      summary: Submit a template for review
      description: Creates a new template that is submitted for review to Facebook.
      tags:
        - "Template management"
      requestBody:
        description: |
          The template to be submitted
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WhatsAppTemplateRequest'
            examples:
              Plain text:
                $ref: '#/components/examples/WhatsAppTextTemplate'
              Text header:
                $ref: '#/components/examples/WhatsAppRichTemplateWithText'
              Image header:
                $ref: '#/components/examples/WhatsAppRichTemplateWithImage'
              Document header:
                $ref: '#/components/examples/WhatsAppRichTemplateWithDocument'
              Video header:
                $ref: '#/components/examples/WhatsAppRichTemplateWithVideo'
              Location header:
                $ref: '#/components/examples/WhatsAppRichTemplateWithLocation'
              Footer:
                $ref: '#/components/examples/WhatsAppTextWithFooterTemplate'
              Quick replies:
                $ref: '#/components/examples/WhatsAppInteractiveTemplateWithQuickReply'
              Call to action:
                $ref: '#/components/examples/WhatsAppInteractiveTemplateWithCallToAction'
              All components:
                $ref: '#/components/examples/WhatsAppAllComponentsUsedTemplate'
      responses:
        201:
          $ref: '#/components/responses/ResourceCreated'
        400:
          $ref: '#/components/responses/BadRequest'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/accounts/{whatsapp-account-id}/templates/{template-id}:
    parameters:
      - $ref: '#/components/parameters/WhatsAppAccountId'
      - $ref: '#/components/parameters/TemplateId'
    get:
      operationId: waGetTemplate
      summary: Read a template
      description: Returns details of a template in your WhatsApp account.
      tags:
        - "Template management"
      responses:
        200:
          description: Returned the template from your account
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppTemplateResponse'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
    delete:
      operationId: waDeleteTemplate
      summary: Delete a template
      description: |
        Deletes the template from your WhatsApp account.

        After deleting the template, a 30-days grace period is starting.
        This is indicated by the `expiresAt` property of the localizations.
      tags:
        - "Template management"
      responses:
        204:
          description: Deletion of the template is pending now.
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/accounts/{whatsapp-account-id}/templates/{template-id}/localizations:
    parameters:
      - $ref: '#/components/parameters/WhatsAppAccountId'
      - $ref: '#/components/parameters/TemplateId'
    get:
      operationId: waListLocalizations
      summary: List localizations
      description: Lists localizations of a template.
      tags:
        - "Template management"
      responses:
        200:
          description: Returned localizations of the template.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/LocalizationResponse'
                minItems: 1
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
    post:
      summary: Add a localization
      operationId: waTemplateAddLocalization
      description: Adds a localization to a template. The localization will be separately reviewed by Facebook.
      tags:
        - "Template management"
      requestBody:
        description: |
          The localization to be submitted
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LocalizationRequest'
      responses:
        201:
          $ref: '#/components/responses/ResourceCreated'
        400:
          $ref: '#/components/responses/BadRequest'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/accounts/{whatsapp-account-id}/templates/{template-id}/{template-language}:
    parameters:
      - $ref: '#/components/parameters/WhatsAppAccountId'
      - $ref: '#/components/parameters/TemplateId'
      - $ref: '#/components/parameters/TemplateLanguage'
    patch:
      operationId: waEditTemplate
      summary: Edit template
      description: Edit a template in a specific language.
      tags:
        - "Template management"
      requestBody:
        description: |
          The template patch request. Exactly one out of category and components must be present.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TemplatePatchRequest'
      responses:
        200:
          description: OK.
        400:
          $ref: '#/components/responses/BadRequest'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/phone-numbers:
    get:
      tags:
        - "Phone Number insights"
      operationId: listAllWhatsAppPhoneNumbers
      summary: List phone numbers
      description: Lists all phone numbers accessible for the given credentials.
      responses:
        200:
          description: Phone numbers assigned to your account
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppPhoneNumbers'
          headers:
            x-total-pages:
              description: How many pages are available
              schema:
                type: integer
            x-total-items:
              description: How many items are available in total
              schema:
                type: integer
            x-page-size:
              description: The maximum number of items per page
              schema:
                type: integer
            x-current-page:
              description: The current page
              schema:
                type: integer
            Link:
              description: Links describing pagination
              schema:
                properties:
                  rel:
                    $ref: '#/components/schemas/PaginationLinkRelation'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/phone-numbers/{phone-number}:
    parameters:
      - $ref: '#/components/parameters/PhoneNumber'
    get:
      operationId: getWhatsAppPhoneNumber
      summary: Read a phone number
      tags:
        - "Phone Number insights"
      description: Returns details about a phone number.

      responses:
        200:
          description: Returned the details about the phone number
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppPhoneNumber'
        404:
          $ref: '#/components/responses/PhoneNumberUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/phone-numbers/{phone-number}/templates:
    parameters:
      - $ref: '#/components/parameters/PhoneNumber'
    get:
      operationId: getAvailableWhatsAppTemplates
      summary: List available templates
      tags:
        - "Phone Number insights"
      description: Lists all available templates for a phone number
      responses:
        200:
          description: Returned templates available for the phone number
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppTemplates'
          headers:
            x-total-pages:
              description: How many pages are available
              schema:
                type: integer
            x-total-items:
              description: How many items are available in total
              schema:
                type: integer
            x-page-size:
              description: The maximum number of items per page
              schema:
                type: integer
            x-current-page:
              description: The current page
              schema:
                type: integer
            Link:
              description: Links describing pagination
              schema:
                properties:
                  rel:
                    $ref: '#/components/schemas/PaginationLinkRelation'
        404:
          $ref: '#/components/responses/PhoneNumberUnknown'
        default:
          $ref: '#/components/responses/Default'
  /configurations/channels/whatsapp:
    get:
      tags:
        - "Phone Number Configurations"
      summary: List Configurations
      operationId: listAllWhatsAppChannels
      description: List all WhatsApp phone number configurations available to your API account
      responses:
        200:
          $ref: '#/components/responses/ListAllWhatsAppChannelsResponse'
        403:
          $ref: '#/components/responses/Forbidden'
        default:
          $ref: '#/components/responses/Default'
  /configurations/channels/whatsapp/phone-numbers/{phone-number}:
    parameters:
      - $ref: '#/components/parameters/PhoneNumber'
    get:
      tags:
        - "Phone Number Configurations"
      summary: Read one configuration
      operationId: getWhatsAppChannelConfig
      description: Returns the specific configuration
      responses:
        200:
          $ref: '#/components/responses/WhatsAppChannelResponse'
        403:
          $ref: '#/components/responses/Forbidden'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/phone-numbers/{phone-number}/settings/profile:
    parameters:
      - $ref: '#/components/parameters/PhoneNumber'
    get:
      operationId: getCurrentWAProfile
      summary: Read the profile
      description: Returns the profile settings of a WhatsApp phone number
      tags:
        - "Profile management"
      responses:
        200:
          description: Returned the current profile settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppProfile'
        403:
          $ref: '#/components/responses/Forbidden'
        404:
          $ref: '#/components/responses/PhoneNumberUnknown'
        default:
          $ref: '#/components/responses/Default'
    patch:
      operationId: updateCurrentWAProfile
      summary: Update the profile
      description: |
        Updates the WhatsApp client profile.

        Supports also selective updates.

        To remove a particular field, set its value to an empty string.
      tags:
        - "Profile management"
      requestBody:
        description: Updated profile settings
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WhatsAppProfile'
      responses:
        204:
          description: Profile updated
        403:
          $ref: '#/components/responses/Forbidden'
        400:
          $ref: '#/components/responses/WhatsAppProfileUpdateFailed'
        404:
          $ref: '#/components/responses/PhoneNumberUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/phone-numbers/{phone-number}/settings/logo:
    parameters:
      - $ref: '#/components/parameters/PhoneNumber'
    get:
      parameters:
        - $ref: '#/components/parameters/WhatsAppProfileLogoFormat'
      operationId: getCurrentWALogo
      summary: Read the logo
      description: Returns the current logo assigned to a WhatsApp phone number profile.
      tags:
        - "Profile management"
      responses:
        200:
          description: Returned the current logo
          content:
            image/png:
              schema:
                type: string
                format: binary
            image/jpeg:
              schema:
                type: string
                format: binary
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppProfileLogoLink'
        403:
          $ref: '#/components/responses/Forbidden'
        404:
          $ref: '#/components/responses/PhoneNumberUnknown'
        default:
          $ref: '#/components/responses/Default'
    put:
      operationId: updateCurrentWALogo
      summary: Update the logo
      description: |
        Updates the logo assigned to a WhatsApp phone number profile.

        The logo must have a minimal edge size of 500 pixels and must not exceed 5 MB in size.

        The recommended size is 640x640 pixels.
      tags:
        - "Profile management"
      requestBody:
        required: true
        description: The image that should be used as the profile logo
        content:
          image/png:
            schema:
              type: string
              format: binary
          image/jpeg:
            schema:
              type: string
              format: binary
      responses:
        204:
          description: Updated the logo successfully
        400:
          $ref: '#/components/responses/BadRequest'
        403:
          $ref: '#/components/responses/Forbidden'
        404:
          $ref: '#/components/responses/PhoneNumberUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/phone-numbers/{phone-number}/settings/commerce:
    parameters:
      - $ref: '#/components/parameters/PhoneNumber'
    get:
      operationId: getWACommerceSetting
      summary: Get commerce icons setting
      tags:
        - "Profile management"
      responses:
        200:
          description: Returned the current commerce setting
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppCommerceSettings'
        403:
          $ref: '#/components/responses/Forbidden'
        404:
          $ref: '#/components/responses/PhoneNumberUnknown'
        default:
          $ref: '#/components/responses/Default'
    post:
      operationId: setWACommerceSetting
      summary: Set commerce icons setting
      tags:
        - "Profile management"
      parameters:
        - in: query
          name: enable
          required: true
          schema:
            type: boolean
      responses:
        204:
          description: commerce setting successfully set
        403:
          $ref: '#/components/responses/Forbidden'
        404:
          $ref: '#/components/responses/PhoneNumberUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/phone-numbers/{phone-number}/settings/identityKeyCheck:
    parameters:
      - $ref: '#/components/parameters/PhoneNumber'
    post:
      operationId: enableIdentityKeyCheck
      summary: Enable/disable identity key check
      tags:
        - "Profile management"
      parameters:
        - in: query
          name: enable
          required: true
          schema:
            type: boolean
      responses:
        204:
          description: identity key check successfully set
        403:
          $ref: '#/components/responses/Forbidden'
        404:
          $ref: '#/components/responses/PhoneNumberUnknown'
        default:
          $ref: '#/components/responses/Default'
  /configurations/channels/whatsapp/phone-numbers/{phone-number}/callbacks:
    parameters:
      - $ref: '#/components/parameters/PhoneNumber'
    put:
      tags:
        - "Callback configuration"
      summary: Update the callback
      operationId: updateWhatsAppChannelCallback
      description: Update the callback settings of a specific phone number.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChannelCallback'
      responses:
        200:
          $ref: '#/components/responses/WhatsAppChannelResponse'
        400:
          $ref: '#/components/responses/BadRequest'
        403:
          $ref: '#/components/responses/Forbidden'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/accounts/{whatsapp-account-id}/flows:
    parameters:
      - $ref: '#/components/parameters/WhatsAppAccountId'
    get:
      operationId: listFlowsOfWhatsAppAccount
      summary: List flows
      tags:
        - "Flows management"
      description: Lists all flows of your WhatsApp account, including flows in draft and deprecated state
      responses:
        200:
          description: Returned the flows
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppFlows'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
    post:
      operationId: createFlowMetadata
      summary: Create basic flow data
      tags:
        - "Flows management"
      requestBody:
        description: The flow basic data you would like to create
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateFlowRequest'
      responses:
        201:
          $ref: '#/components/responses/CreateFlowResponse'
        400:
          $ref: '#/components/responses/BadRequest'
        403:
          $ref: '#/components/responses/Forbidden'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/accounts/{whatsapp-account-id}/flows/{whatsapp-flow-id}:
    parameters:
      - $ref: '#/components/parameters/WhatsAppAccountId'
      - $ref: '#/components/parameters/WhatsAppFlowId'
    get:
      operationId: flowDetails
      summary: Flow details
      tags:
        - "Flows management"
      description: This request will return a single Flow's details.
      responses:
        200:
          description: Returned the flow
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppFlowDetail'
        400:
          $ref: '#/components/responses/BadRequest'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
    post:
      operationId: updateFlowMetadata
      summary: Updating Flow's Metadata
      tags:
        - "Flows management"
      requestBody:
        description: After you have created your Flow, you can update the name or categories using the update request.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateFlowRequest'
      responses:
        200:
          description: Successfully updated flow info
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
        400:
          $ref: '#/components/responses/BadRequest'
        403:
          $ref: '#/components/responses/Forbidden'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
    delete:
      operationId: deleteFlow
      summary: Delete flow
      tags:
        - "Flows management"
      description: Flow can be deleted just when it is in draft state.
      responses:
        200:
          description: Successfully deleted flow
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
        400:
          $ref: '#/components/responses/BadRequest'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/accounts/{whatsapp-account-id}/flows/{whatsapp-flow-id}/assets:
    parameters:
      - $ref: '#/components/parameters/WhatsAppAccountId'
      - $ref: '#/components/parameters/WhatsAppFlowId'
    get:
      operationId: getFlowAssetList
      summary: Get assets of the flow
      tags:
        - "Flows management"
      description: This request will return list of assets (json) attached to the flow
      responses:
        200:
          description: Returned the asset list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppFlowAssets'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
    post:
      operationId: addFlowAsset
      summary: To update Flow JSON for a specified Flow, use this request. Add file as application/json. Do not use form-data.
      tags:
        - "Flows management"
      requestBody:
        description: Add file as application/json. Do not use form-data.
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        200:
          description: Successfully add json asset
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  validationErrors:
                    type: array
                    description: The list of asset validation errors. List is empty if the asset has no errors.
                    items:
                      $ref: '#/components/schemas/FlowValidationError'
        400:
          $ref: '#/components/responses/BadRequest'
        403:
          $ref: '#/components/responses/Forbidden'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/accounts/{whatsapp-account-id}/flows/{whatsapp-flow-id}/preview:
    parameters:
      - $ref: '#/components/parameters/WhatsAppAccountId'
      - $ref: '#/components/parameters/WhatsAppFlowId'
      - $ref: '#/components/parameters/WhatsAppFlowPreviewInvalidate'
    get:
      operationId: getFlowPreview
      summary: Get preview link of the flow
      tags:
        - "Flows management"
      description: In order to visualize the Flows created, you can generate a web preview URL with this request. The preview URL is public and can be shared with different stakeholders to visualize the Flow.
      responses:
        200:
          description: Returned the preview link and expire date
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WhatsAppFlowPreview'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/accounts/{whatsapp-account-id}/flows/{whatsapp-flow-id}/publish:
    parameters:
      - $ref: '#/components/parameters/WhatsAppAccountId'
      - $ref: '#/components/parameters/WhatsAppFlowId'
    post:
      operationId: publishFlow
      summary: This request updates the status of the Flow to "PUBLISHED". This action is not reversible. The Flow and its assets become immutable once published.
      tags:
        - "Flows management"
      responses:
        200:
          description: Successfully published flow
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
        400:
          $ref: '#/components/responses/BadRequest'
        403:
          $ref: '#/components/responses/Forbidden'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
  /channels/whatsapp/accounts/{whatsapp-account-id}/flows/{whatsapp-flow-id}/deprecate:
    parameters:
      - $ref: '#/components/parameters/WhatsAppAccountId'
      - $ref: '#/components/parameters/WhatsAppFlowId'
    post:
      operationId: deprecateFlow
      summary: Once a Flow is published, it cannot be modified or deleted, but can be marked as deprecated.
      tags:
        - "Flows management"
      responses:
        200:
          description: Successfully deprecated flow
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
        400:
          $ref: '#/components/responses/BadRequest'
        403:
          $ref: '#/components/responses/Forbidden'
        404:
          $ref: '#/components/responses/WhatsAppAccountUnknown'
        default:
          $ref: '#/components/responses/Default'
components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: apikey
  parameters:
    MessageId:
      name: message-id
      in: path
      required: true
      description: The ID of the message
      schema:
        type: string
        format: uuid
        example: 77185196-664a-43ec-b14a-fe97036c697f
    MoMessageId:
      name: message-id
      in: path
      required: true
      description: The ID of the MoMessage
      schema:
        type: string
        example: ABEGSRcolTdUAhCDTh0Viu2YwDb751d6V33t
    PhoneNumber:
      name: phone-number
      in: path
      required: true
      description: The phone number used for WhatsApp messaging
      schema:
        type: integer
        minLength: 4
        maxLength: 15
      example: 4923147790717
    PhoneNumberQuery:
      name: phone-number
      in: query
      description: The phone number used for WhatsApp messaging
      schema:
        type: integer
        minLength: 4
        maxLength: 15
      example: 4923147790717
    WhatsAppProfileLogoFormat:
      name: format
      in: query
      description: The format in which the icon should be returned. The default is binary.
      schema:
        type: string
        enum:
          - link
          - binary
        default: binary
    WhatsAppAccountId:
      name: whatsapp-account-id
      in: path
      required: true
      description: WhatsApp account ID
      schema:
        type: string
      example: 132923147790717
    TemplateId:
      name: template-id
      in: path
      required: true
      description: Referenced template
      schema:
        type: string
        pattern: "[a-z_0-9]+"
      example: welcome_message
    TemplateLanguage:
      name: template-language
      in: path
      required: true
      description: Template localizations language code
      schema:
        type: string
      example: en
    WhatsAppFlowId:
      name: whatsapp-flow-id
      in: path
      required: true
      description: WhatsApp flow ID
      schema:
        type: string
      example: 12345678901234
    WhatsAppFlowPreviewInvalidate:
      name: invalidate
      in: query
      required: false
      description: If invalidate is set to true, a new link will be generated, with new expire date. Otherwise, same one will be used. Default value is false.
      schema:
        type: boolean
      example: ?invalidate=true
  responses:
    MessageResponse:
      description: The response after the server has accepted the request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/MessageResponse'
    BulkMessageResponse:
      description: The response after the server has accepted the request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/BulkMessageResponse'
    ResourceCreated:
      description: The requested resource was created.
      headers:
        Location:
          schema:
            type: string
          description: The URI of the newly created resource
    Default:
      description: The default response in case of any other error. Please check the error object for details
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    MoMessageNotFound:
      description: No MoMessage was found for the given Message ID.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          example:
            status: 404
            title: Not Found
    WhatsAppProfileUpdateFailed:
      description: |
        Profile update failed. In the case a partial update failed: retrieve the current profile, change the required information and retry with the whole profile.
      content:
        application/problem+json:
          schema:
            allOf:
              - $ref: '#/components/schemas/Problem'
            properties:
              code:
                type: string
                description: error code
          example:
            status: 400
            title: Profile update failed.
            code: 1009
    WhatsAppAccountUnknown:
      description: The WhatsApp account does not exist.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          example:
            status: 404
            title: WhatsApp account unknown
    PhoneNumberUnknown:
      description: The phone number does not exist.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          example:
            status: 404
            title: Phone number unknown
    BadRequest:
      description: The request does not match our expectations. Please check the Problems object for details
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          example:
            status: 400
            violations: [
              {
                field: validate.request.whatsapp.contentType,
                message: must not be empty
              }
            ]
            title: Constraint Violation
    Forbidden:
      description: You attempting to use a number that is not assigned to your account
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          example:
            type: https://httpstatuses.com/403
            title: Forbidden
            status: 403
    ListAllWhatsAppChannelsResponse:
      description: A list of WhatsApp phone number configurations
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/WhatsAppChannelResponses'
    WhatsAppChannelResponse:
      description: The WhatsApp phone number configuration
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/WhatsAppChannelResponse'
    CreateFlowResponse:
      description: The WhatsApp phone number configuration
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CreateFlow'
  examples:
    ## Messaging section

    WhatsAppTextMessage:
      value:
        to: "12331132"
        from: "1233423454"
        channel: whatsapp
        content:
          contentType: text
          text: hi!
    WhatsAppTextMessageWithUrlRendering:
      value:
        to: "12331132"
        from: "1233423454"
        channel: whatsapp
        content:
          contentType: text
          text: hi! Check out this page https://www.tyntec.com
          renderUrlPreview: true
    WhatsAppImageMessage:
      value:
        to: "12331132"
        from: "1233423454"
        channel: whatsapp
        content:
          contentType: image
          image:
            url: https://www.tyntec.com/themes/custom/tyntec/image/tyntec-logo-color.png
            caption: Hi this is a test
    WhatsAppStickerMessage:
      value:
        to: "12331132"
        from: "1233423454"
        channel: whatsapp
        content:
          contentType: sticker
          sticker:
            url: https://www.tyntec.com/sites/default/files/2020-07/tyntec_rocket_sticker_512px_001_.webp
    WhatsAppLocationMessage:
      value:
        to: "12331132"
        from: "1233423454"
        channel: whatsapp
        content:
          contentType: location
          location:
            latitude: 51.5005765
            longitude: 7.4954884
            name: tyntec GmbH
            address: tyntec GmbH, SemerteichstraÃŸe, Dortmund
    WhatsAppReactionMessage:
      value:
        to: "12331132"
        from: "1233423454"
        channel: whatsapp
        content:
          contentType: reaction
          reaction:
            messageId: wamid.987654321
            emoji: ðŸ˜€
    WhatsAppDocumentMessage:
      value:
        to: "12331132"
        from: "1233423454"
        channel: whatsapp
        content:
          contentType: document
          document:
            url: https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf
            caption: Tyntec Pricelist
            filename: tyntec_pricelist.pdf
    WhatsAppAudioMessage:
      value:
        to: "12331132"
        from: "1233423454"
        channel: whatsapp
        content:
          contentType: audio
          audio:
            url: https://dl.espressif.com/dl/audio/ff-16b-2c-44100hz.mp4
    WhatsAppTemplateMessage:
      value:
        to: "12331132"
        from: "1233423454"
        channel: whatsapp
        content:
          contentType: template
          template:
            templateId: 2fa_code
            language: en
            components:
              body:
                - type: text
                  text: Peter
                - type: text
                  text: 123456
                - type: text
                  text: 5 minutes
    WhatsAppRichNotificationMessage:
      value:
        to: "12331132"
        from: "1233423454"
        channel: whatsapp
        content:
          contentType: template
          template:
            templateId: invoice
            language: en
            components:
              header:
                  - type: image
                    image:
                      url: https://www.tyntec.com/themes/custom/tyntec/image/tyntec-logo-color.png
              body:
                  - type: text
                    text: Mr. Tester
                  - type: text
                    text: "Inv: 1233131-2020"
    WhatsAppInteractiveQuickReplyMessage:
      value:
        to: "12331132"
        from: "1233423454"
        channel: whatsapp
        content:
          contentType: template
          template:
            templateId: invoice
            language: en
            components:
              body:
                  - type: text
                    text: Mr. Tester
                  - type: text
                    text: "Inv: 1233131-2020"
              buttons:
                - type: quick_reply
                  index: 0
                  payload: InvoiceId:1233131-2020
                - type: quick_reply
                  index: 2
                  payload: CustomerId:13134141
    WhatsAppInteractiveCallToActionMessage:
      value:
        to: "12331132"
        channels:
          - whatsapp
        whatsapp:
          from: "1233423454"
          contentType: template
          template:
            templateId: invoice
            language:
              policy: deterministic
              code: en
            components:
              - body:
                  - type: text
                    text: Mr. Tester
                  - type: text
                    text: "Inv: 1233131-2020"
              - button:
                  - type: url
                    index: 0
                    text: 1233131-2020
    ## Template management section
    WhatsAppTextTemplate:
      value:
        name: welcome
        category: UTILITY
        localizations:
          - language: en
            components:
              - type: BODY
                text: |
                  Hi {{1}},

                  Welcome to our support.
                  How can we help you?

                  Your support team
    WhatsAppTextWithFooterTemplate:
      value:
        name: welcome_v2
        category: UTILITY
        localizations:
          - language: en
            components:
              - type: BODY
                text: |
                  Hi {{1}},

                  Welcome to our support.
                  How can we help you?
              - type: FOOTER
                text: Your support team
    WhatsAppRichTemplateWithImage:
      value:
        name: appointment_confirmation
        category: UTILITY
        localizations:
          - language: en
            components:
              - type: HEADER
                format: IMAGE
              - type: BODY
                text: |
                  Hi {{1}},

                  this is our office building.

                  Please be in *front* of the building at {{2}}
              - type: FOOTER
                text: Your people team
    WhatsAppRichTemplateWithDocument:
      value:
        name: invoice
        category: UTILITY
        localizations:
          - language: en
            components:
              - type: HEADER
                format: DOCUMENT
              - type: BODY
                text: |
                  Hi {{1}},

                  here's the requested invoice for your order {{2}}.

                  Don't hesitate to come back to us, if you have any questions.
    WhatsAppRichTemplateWithVideo:
      value:
        name: surveilance_alert
        category: UTILITY
        localizations:
          - language: en
            components:
              - type: HEADER
                format: DOCUMENT
              - type: BODY
                text: |
                  Hi {{1}},

                  we recorded this activity at {{2}} on the location named {{3}}

                  Please check if any countermeasures are required
    WhatsAppRichTemplateWithLocation:
      value:
        name: pickup_point
        category: UTILITY
        localizations:
          - language: en
            components:
              - type: HEADER
                format: LOCATION
              - type: BODY
                text: |
                  Hi {{1}},

                  please meet us at {{2}} on the specified point.

                  Sincerely,

                  Your travel team.
    WhatsAppRichTemplateWithText:
      value:
        name: account_upgrade
        category: UTILITY
        localizations:
          - language: en
            components:
              - type: HEADER
                format: TEXT
                text: Account {{1}} information
              - type: BODY
                text: |
                  Hi {{1}},

                  we happily inform you that your account {{2}} has been upgraded to {{3}}.

                  Sincerely,

                  Your support team.
    WhatsAppInteractiveTemplateWithQuickReply:
      value:
        name: ticket_closed
        category: UTILITY
        localizations:
          - language: en
            components:
              - type: BODY
                text: |
                  Hi {{1}},

                  we've closed your ticket {{2}} due to inactivity.

                  Has your issue been solved in the meantime?
              - type: BUTTONS
                buttons:
                  - type: QUICK_REPLY
                    text: Yes
                  - type: QUICK_REPLY
                    text: No
    WhatsAppInteractiveTemplateWithCallToAction:
      value:
        name: invoice_issues
        category: UTILITY
        localizations:
          - language: en
            components:
              - type: BODY
                text: |
                  Hi {{1}},

                  we need to inform you, that the invoice {{2}} is not payed yet.
              - type: BUTTONS
                buttons:
                  - type: PHONE_NUMBER
                    phoneNumber: +4923147790813
                    text: Call an agent
                  - type: URL
                    text: Pending Invoice
                    url: https://www.myservice.com/invoices/{{1}}
    WhatsAppAllComponentsUsedTemplate:
      value:
        name: surveilance_v2
        category: UTILITY
        localizations:
          - language: en
            components:
              - type: HEADER
                format: Video
              - type: BODY
                text: |
                  Hi {{1}},

                  we recorded this activity at {{2}} on the location named {{3}}

                  Please check if any countermeasures are required
              - type: FOOTER
                text: Your security team
              - type: BUTTONS
                buttons:
                  - type: QUICK_REPLY
                    text: All fine
                  - type: QUICK_REPLY
                    text: Call the police
                  - type: QUICK_REPLY
                    text: I take care
  schemas:
    Problem:
      $ref: './common.yaml#/components/schemas/Problem'
    MessageResponse:
      $ref: './common.yaml#/components/schemas/MessageResponse'
    BulkMessageResponse:
      $ref: './common.yaml#/components/schemas/BulkMessageResponse'
    MessageRequest:
      type: object
      description: The message you would like to send
      required:
        - to
        - channel
        - from
      properties:
        to:
          type: string
          description: |
            The message's recipient
            The format depends on the specific channel
          example: "+1233423454"
        from:
          type: string
          description: |
            The sender of the messages. The format depends on the specific channel.
          example: "+1233423454"
        channel:
          type: string
          description: The channel selected for delivery.
          example: whatsapp
          enum:
            - whatsapp
        context:
          type: string
          description: The context for this particular message
          maxLength: 125
        content:
          oneOf:
            - $ref: '#/components/schemas/WhatsAppTextContent'
            - $ref: '#/components/schemas/WhatsAppImageContent'
            - $ref: '#/components/schemas/WhatsAppDocumentContent'
            - $ref: '#/components/schemas/WhatsAppVideoContent'
            - $ref: '#/components/schemas/WhatsAppAudioContent'
            - $ref: '#/components/schemas/WhatsAppStickerContent'
            - $ref: '#/components/schemas/WhatsAppLocationContent'
            - $ref: '#/components/schemas/WhatsAppReactionContent'
            - $ref: '#/components/schemas/WhatsAppContactsContent'
            - $ref: '#/components/schemas/WhatsAppTemplateContent'
            - $ref: '#/components/schemas/WhatsAppInteractiveContent'
      example:
        to: "+123234234"
        from: "545345345"
        channel: "whatsapp"
        content:
          contentType: text
          text: A simple text message
    BulkMessageRequest:
      type: object
      description: The bulk of messages you would like to send
      required:
        - to
        - channel
        - from
        - messages
      properties:
        to:
          type: string
          description: |
            The message's recipient
            The format depends on the specific channel
          example: "+1233423454"
        from:
          type: string
          description: |
            The sender of the messages. The format depends on the specific channel.
          example: "+1233423454"
        channel:
          type: string
          description: The channel selected for delivery.
          example: whatsapp
          enum:
            - whatsapp
        messages:
          type: array
          maxItems: 20
          minItems: 2
          items:
            oneOf:
            - $ref: '#/components/schemas/WhatsAppTextContent'
            - $ref: '#/components/schemas/WhatsAppImageContent'
            - $ref: '#/components/schemas/WhatsAppDocumentContent'
            - $ref: '#/components/schemas/WhatsAppVideoContent'
            - $ref: '#/components/schemas/WhatsAppAudioContent'
            - $ref: '#/components/schemas/WhatsAppStickerContent'
            - $ref: '#/components/schemas/WhatsAppLocationContent'
            - $ref: '#/components/schemas/WhatsAppContactsContent'
            - $ref: '#/components/schemas/WhatsAppTemplateContent'
    CreateFlowRequest:
      type: object
      description: The flow data you would like to create
      required:
        - name
        - categories
      properties:
        name:
          type: string
          description: Flow name
          example: Test flow
        categories:
          type: array
          description: A list of Flow categories. Flow must have at least one category
          items:
            $ref: '#/components/schemas/FlowCategory'
          example: ["OTHER"]
    UpdateFlowRequest:
      type: object
      description: Flow data you would like to change
      properties:
        name:
          type: string
          description: Flow name
          example: Test flow
        categories:
          type: array
          description: A list of Flow categories. Flow must have at least one category
          items:
            $ref: '#/components/schemas/FlowCategory'
          example: ["OTHER"]
    #
    # Content types
    #
    WhatsAppTextContent:
      type: object
      description: A plain text message
      required:
        - contentType
        - text
      properties:
        contentType:
          type: string
          description: Determines the type of the message. Always _text_.
          enum:
            - text
        text:
          type: string
          description: Text to be sent
          maxLength: 4096
        renderUrlPreview:
          type: boolean
          description: In case a URL is present on the text should a preview be tried to be rendered
          default: false
        replyTo:
          type: string
          description: The whatsapp message ID of the referenced message
        identityKeyHash:
          type: string
          description: The customer's hash ID
    WhatsAppImageContent:
      type: object
      description: Image message
      required:
        - contentType
        - image
      properties:
        contentType:
          type: string
          description: Determines the type of the message. Always _image_.
          enum:
            - image
        image:
          $ref: '#/components/schemas/WhatsAppImage'
        replyTo:
          type: string
          description: The whatsapp message ID of the referenced message
        identityKeyHash:
          type: string
          description: The customer's hash ID
    WhatsAppDocumentContent:
      type: object
      description: A document message
      required:
        - contentType
        - document
      properties:
        contentType:
          type: string
          description: Determines the type of the message. Always _document_.
          enum:
            - document
        document:
          $ref: '#/components/schemas/WhatsAppDocument'
        replyTo:
          type: string
          description: The whatsapp message ID of the referenced message
        identityKeyHash:
          type: string
          description: The customer's hash ID
    WhatsAppVideoContent:
      type: object
      description: A video message
      required:
        - contentType
        - video
      properties:
        contentType:
          type: string
          description: Determines the type of the message. Always _video_.
          enum:
            - video
        video:
          $ref: '#/components/schemas/WhatsAppVideo'
        replyTo:
          type: string
          description: The whatsapp message ID of the referenced message
        identityKeyHash:
          type: string
          description: The customer's hash ID
    WhatsAppAudioContent:
      type: object
      description: An audio message
      required:
        - contentType
        - audio
      properties:
        contentType:
          type: string
          description: Determines the type of the message. Always _audio_.
          enum:
            - audio
        audio:
          $ref: '#/components/schemas/WhatsAppAudio'
        replyTo:
          type: string
          description: The whatsapp message ID of the referenced message
        identityKeyHash:
          type: string
          description: The customer's hash ID
    WhatsAppStickerContent:
      type: object
      description: A sticker message
      required:
        - contentType
        - sticker
      properties:
        contentType:
          type: string
          description: Determines the type of the message. Always _sticker_.
          enum:
            - sticker
        sticker:
          $ref: '#/components/schemas/WhatsAppSticker'
        replyTo:
          type: string
          description: The whatsapp message ID of the referenced message
        identityKeyHash:
          type: string
          description: The customer's hash ID
    WhatsAppLocationContent:
      type: object
      description: A location message
      required:
        - contentType
        - location
      properties:
        contentType:
          type: string
          description: Determines the type of the message. Always _location_.
          enum:
            - location
        location:
          $ref: '#/components/schemas/WhatsAppLocation'
        replyTo:
          type: string
          description: The whatsapp message ID of the referenced message
        identityKeyHash:
          type: string
          description: The customer's hash ID
    WhatsAppReactionContent:
      type: object
      description: A reaction message
      required:
        - contentType
        - reaction
      properties:
        contentType:
          type: string
          description: Determines the type of the message. Always _reaction_.
          enum:
            - reaction
        reaction:
          $ref: '#/components/schemas/WhatsAppReaction'
        replyTo:
          type: string
          description: The whatsapp message ID of the referenced message
        identityKeyHash:
          type: string
          description: The customer's hash ID
    WhatsAppContactsContent:
      type: object
      description: A message with contacts
      required:
        - contentType
        - contacts
      properties:
        contentType:
          type: string
          description: Determines the type of the message. Always _contacts_.
          enum:
            - contacts
        contacts:
          type: array
          items:
            $ref: '#/components/schemas/Contact'
        replyTo:
          type: string
          description: The whatsapp message ID of the referenced message
        identityKeyHash:
          type: string
          description: The customer's hash ID
    WhatsAppTemplateContent:
      type: object
      description: Templated message
      required:
        - contentType
        - template
      properties:
        contentType:
          type: string
          description: Determines the type of the message. Always _template_.
          enum:
            - template
        template:
          $ref: '#/components/schemas/WhatsAppTemplate'
        replyTo:
          type: string
          description: The whatsapp message ID of the referenced message
        identityKeyHash:
          type: string
          description: The customer's hash ID
    WhatsAppInteractiveContent:
      type: object
      description: Interactive message
      required:
        - contentType
        - interactive
      properties:
        contentType:
          type: string
          description: Determines the type of the message. Always _interactive_.
          enum:
            - interactive
        interactive:
          oneOf:
            - $ref: '#/components/schemas/WhatsAppInteractiveButtonMessage'
            - $ref: '#/components/schemas/WhatsAppInteractiveListMessage'
            - $ref: '#/components/schemas/WhatsAppInteractiveProductMessage'
            - $ref: '#/components/schemas/WhatsAppInteractiveProductListMessage'
            - $ref: '#/components/schemas/WhatsAppInteractiveLocationMessage'
            - $ref: '#/components/schemas/WhatsAppInteractiveFlowMessage'
            - $ref: '#/components/schemas/WhatsAppInteractiveAddressMessage'
        replyTo:
          type: string
          description: The whatsapp message ID of the referenced message
        identityKeyHash:
          type: string
          description: The customer's hash ID
    WhatsAppInteractiveFooterContent:
      type: object
      description: The footer of an interactive message
      required:
        - type
        - text
      properties:
        type:
          type: string
          description: Determines the type of the message. Always _text_.
          enum:
            - text
        text:
          type: string
          description: A footer to be displayed on the message
          maxLength: 60
    WhatsAppInteractiveTextContent:
      type: object
      description: The message body of an interactive message
      required:
        - type
        - text
      properties:
        type:
          type: string
          description: Determines the type of the message. Always _text_.
          enum:
            - text
        text:
          type: string
          description: The text body of the message
          maxLength: 1024
    #
    # Media
    #
    BaseMedia:
      type: object
      description: |
        A base object handling media definitions for sending.

        One of both properties _url_ or _id_ **must** be set
      properties:
        url:
          type: string
          description: The URL of the location where the media is stored
        id:
          type: string
          description: The media id of previously uploaded media
          format: uuid
    WhatsAppImage:
      type: object
      description: An image media specification
      allOf:
        - $ref: '#/components/schemas/BaseMedia'
      properties:
        caption:
          type: string
          maxLength: 4096
    WhatsAppDocument:
      type: object
      description: A document media specification
      allOf:
        - $ref: '#/components/schemas/BaseMedia'
      properties:
        caption:
          type: string
          maxLength: 4096
        filename:
          type: string
    WhatsAppVideo:
      type: object
      description: A video media specification
      allOf:
        - $ref: '#/components/schemas/BaseMedia'
      properties:
        caption:
          type: string
          maxLength: 4096
    WhatsAppAudio:
      type: object
      description: An audio media specification
      allOf:
        - $ref: '#/components/schemas/BaseMedia'
    WhatsAppSticker:
      type: object
      description: A sticker media specification
      allOf:
        - $ref: '#/components/schemas/BaseMedia'
    #
    # Other types
    #
    WhatsAppLocation:
      type: object
      description: Location received or send
      required:
        - longitude
        - latitude
      properties:
        longitude:
          type: number
          format: double
          description: The longitude part of the coordinate
          example:
            7.4954884
        latitude:
          type: number
          format: double
          description: The latitude part of the coordinate
          example:
            51.5005765
        name:
          type: string
          maxLength: 256
          description: An optional name
          example:
            tyntec GmbH
        address:
          type: string
          maxLength: 256
          description: An optional address, will only be rendered if name is set
          example:
            tyntec GmbH, SemerteichstraÃŸe, Dortmund
    WhatsAppReaction:
      type: object
      description: An emoji reaction to a formerly sent or received message
      required:
        - messageId
        - emoji
      properties:
        messageId:
          type: string
          description: The message id of the message you want to react to.
          example:
            wamid.j0nmfofmneofn30fnekn2929
        emoji:
          type: string
          minLength: 0
          maxLength: 1
          description: The actual reaction emoji. Must be a string consisting of exactly one emoji or an empty string to delete a former reaction.
          example:
            ðŸ˜€

    Contact:
      type: object
      description: A contact object
      properties:
        birthday:
          type: string
          description: The birthday of the contact
          example:
            2018-01-01
        addresses:
          type: array
          description: A list of addresses assigned to the contact
          items:
            $ref: '#/components/schemas/Address'
        emails:
          type: array
          description: A list of emails assigned to the contact
          items:
            $ref: '#/components/schemas/Email'
        ims:
          type: array
          description: A list of IMS accounts assigned to the contact
          items:
            $ref: '#/components/schemas/IMS'
        name:
          $ref: '#/components/schemas/Name'
        org:
          $ref: '#/components/schemas/Organisation'
        phones:
          type: array
          description: A list of phone numbers assigned to the contact
          items:
            $ref: '#/components/schemas/ContactPhone'
        urls:
          type: array
          description: A list of URLs assigned to the contact
          items:
            $ref: '#/components/schemas/ContactUrl'
    Address:
      type: object
      description: An address of a contact
      properties:
        city:
          type: string
          description: The city name
          example: Dortmund
        country:
          type: string
          description: The full country name
          example: Germany
        countryCode:
          type: string
          description: The two-letter code abbreviation
          example: de
        state:
          type: string
          description: The state abbreviation
          example: NRW
        street:
          type: string
          description: The street name and number
        type:
          type: string
          description: The type of address
          example: WORK
        zip:
          type: string
          description: The ZIP or postal code
          example: "44231"
    Email:
      type: object
      description: An email of the contact
      properties:
        email:
          type: string
          description: The email address
          example: whatsapp@tyntec.com
        type:
          type: string
          description: The type of email
          example: WORK
    IMS:
      type: object
      description: An IMS of the contact
      properties:
        service:
          type: string
          description: The type of the the service
          example: WhatsApp
        userId:
          type: string
          description: The IMS user id
          example: "123123123"
    Name:
      type: object
      description: |
        The name of a contact. Apart from the property ``formattedName`` at least one of the other must be set
      required:
        - formattedName
      properties:
        prefix:
          type: string
          description: A prefix of the contact's name
          example: Mr.
        firstName:
          type: string
          description: The first name of the contact
          example: Peter
        middleName:
          type: string
          description: The middle name of the contact
          example: Michael
        lastName:
          type: string
          description: The last name of the contact
          example: Tyntec
        suffix:
          type: string
          description: A suffix of the contact's name
          example: senior
        formattedName:
          type: string
          description: The completely formatted name
          example: Mr. Peter Michael Tyntec senior
    Organisation:
      type: object
      description: An organisation associated with the contact
      properties:
        company:
          type: string
          description: The name of the contact's company
          example: tyntec GmbH
        department:
          type: string
          description: The name of the contact's department
          example: Development
        title:
          type: string
          description: The contact's business title
          example: API Guardian
    ContactPhone:
      type: object
      description: A phone entry of a contact
      properties:
        phone:
          type: string
          description: The phone number
          example: +49 231 477 90 813
        type:
          type: string
          description: The type of phone number
          example: WORK
    ContactUrl:
      type: object
      description: An URL of a contact
      properties:
        url:
          type: string
          description: The URL of a contact
          example: https://www.tyntec.com
        type:
          type: string
          description: The type of URL
          example: WORK

    # Templated messages

    WhatsAppTemplate:
      type: object
      required:
        - templateId
        - templateLanguage
      properties:
        templateId:
          type: string
        templateLanguage:
          type: string
        components:
          $ref: '#/components/schemas/WhatsAppTemplateComponents'
    WhatsAppTemplateComponents:
      type: object
      properties:
        header:
          type: array
          minItems: 0
          maxItems: 1
          items:
            oneOf:
            - $ref: '#/components/schemas/WhatsAppTemplateTextHeaderComponent'
            - $ref: '#/components/schemas/WhatsAppTemplateImageHeaderComponent'
            - $ref: '#/components/schemas/WhatsAppTemplateVideoHeaderComponent'
            - $ref: '#/components/schemas/WhatsAppTemplateDocumentHeaderComponent'
            - $ref: '#/components/schemas/WhatsAppTemplateLocationHeaderComponent'
        body:
          type: array
          minItems: 0
          maxItems: 1
          items:
            $ref: '#/components/schemas/WhatsAppTemplateTextBodyComponent'
        button:
          oneOf:
            - $ref: '#/components/schemas/WhatsAppQuickReplyButtons'
            - $ref: '#/components/schemas/WhatsAppCallToActionButtons'
            - $ref: '#/components/schemas/WhatsAppFlowButtons'
        carousel:
          description: List of carousel cards. Carousel must have at least one card, and maximum 10.
          minItems: 1
          maxItems: 10
          oneOf:
            - $ref: '#/components/schemas/WhatsAppCarouselComponent'
    WhatsAppTemplateTextHeaderComponent:
      type: object
      required:
        - type
        - text
        - example
      properties:
        type:
          type: string
          enum:
            - text
        text:
          type: string
          maxLength: 60
        example:
          $ref: '#/components/schemas/WhatsAppTemplateTextHeaderComponentExample'
    WhatsAppTemplateTextHeaderComponentExample:
      type: object
      description: An example of the header text
      properties:
        text:
          type: string
          maxLength: 60
          description: Example text
          example: John Doe
    WhatsAppTemplateImageHeaderComponent:
      type: object
      required:
        - type
        - image
      properties:
        type:
          type: string
          enum:
            - image
        image:
          $ref: '#/components/schemas/WhatsAppTemplateMediaHeader'
    WhatsAppTemplateVideoHeaderComponent:
      type: object
      required:
        - type
        - video
      properties:
        type:
          type: string
          enum:
            - video
        video:
          $ref: '#/components/schemas/WhatsAppTemplateMediaHeader'
    WhatsAppTemplateDocumentHeaderComponent:
      type: object
      required:
        - type
        - document
      properties:
        type:
          type: string
          enum:
            - document
        document:
          $ref: '#/components/schemas/WhatsAppTemplateDocumentHeader'
    WhatsAppTemplateLocationHeaderComponent:
      type: object
      required:
        - type
        - location
      properties:
        type:
          type: string
          enum:
            - location
        location:
          $ref: '#/components/schemas/WhatsAppLocation'
    WhatsAppTemplateMediaHeader:
      type: object
      description: Media header specification
      allOf:
        - $ref: '#/components/schemas/BaseMedia'
    WhatsAppTemplateDocumentHeader:
      type: object
      description: Document media specification
      allOf:
        - $ref: '#/components/schemas/BaseMedia'
      properties:
        filename:
          type: string
          description: Additional info for the filename to be displayed.
          example: Test PDF
    WhatsAppTemplateTextBodyComponent:
      type: object
      description: Body parameter replacement of a template
      required:
        - type
        - text
        - example
      properties:
        type:
          type: string
          enum:
            - text
        text:
          type: string
        example:
          $ref: '#/components/schemas/WhatsAppTemplateTextBodyComponentExample'
    WhatsAppTemplateTextBodyComponentExample:
      type: object
      description: Examples of the body parameters.
      properties:
        texts:
          type: array
          description: Examples of the body parameters
          items:
            type: string
          example:
            - John Doe
            - Order ID 123
    WhatsAppCarouselComponent:
      type: object
      description: Carousel card definition
      required:
        - cardIndex
        - components
      properties:
        cardIndex:
          type: integer
          description: order in which card appears within the card carousel. 0 indicates first card, 1 indicates second...
          example: 0
        components:
          $ref: '#/components/schemas/WhatsAppCarouselTemplateComponents'
    WhatsAppCarouselTemplateComponents:
      type: object
      properties:
        header:
          type: array
          required: true
          maxItems: 1
          items:
            oneOf:
              - $ref: '#/components/schemas/WhatsAppTemplateImageHeaderComponent'
              - $ref: '#/components/schemas/WhatsAppTemplateVideoHeaderComponent'
        body:
          type: array
          minItems: 0
          maxItems: 1
          items:
            $ref: '#/components/schemas/WhatsAppTemplateTextBodyComponent'
        button:
          anyOf:
            - $ref: '#/components/schemas/QuickReplyButtonComponent'
            - $ref: '#/components/schemas/UrlButtonComponent'
    WhatsAppQuickReplyButtons:
      type: array
      minItems: 0
      maxItems: 3
      items:
        $ref: '#/components/schemas/QuickReplyButtonComponent'
    WhatsAppCallToActionButtons:
      type: array
      minItems: 0
      maxItems: 1
      items:
        $ref: '#/components/schemas/UrlButtonComponent'
    WhatsAppFlowButtons:
      type: array
      minItems: 0
      maxItems: 1
      items:
        $ref: '#/components/schemas/FlowButtonComponent'
    QuickReplyButtonComponent:
      type: object
      description: This type can be used up to three times
      required:
        - type
        - index
        - payload
      properties:
        type:
          type: string
          description: Determines the type of the button. Always _quick_reply_.
          enum:
            - quick_reply
        index:
          type: number
          description: Determines the index of the button that should be enhanced with the payload.
          minimum: 0
          maximum: 2
        payload:
          type: string
          maxLength: 128
          description: A payload for this quick reply button. Sent back on the `MoMessage::PostBack` event
    UrlButtonComponent:
      type: object
      description: This type can be used up to one time
      required:
        - type
        - index
        - text
      properties:
        type:
          type: string
          description: Determines the type of the button. Always _url_.
          enum:
            - url
        index:
          type: number
          description: Determines the index of the button that should be enhanced with a custom parameter
          minimum: 0
          maximum: 1
        text:
          type: string
          maxLength: 2000
          description: Which text should be appended to a dynamic URL. **Note** the requested templates url button must end with {{1}}.
    FlowButtonComponent:
      type: object
      description: This type can be used up to one time
      required:
        - type
        - index
      properties:
        type:
          type: string
          description: Determines the type of the button. Always _flow_.
          enum:
            - flow
        index:
          type: number
          description: Determines the index of the button that should be enhanced with a custom parameter
          minimum: 0
          maximum: 1

    #
    # Interactive messages
    #

    WhatsAppInteractiveButtonMessage:
      type: object
      description: |
        An interactive message type
      required:
        - subType
        - components
      properties:
        subType:
          type: string
          enum:
            - buttons
        components:
          $ref: '#/components/schemas/WhatsAppInteractiveButtonComponents'
      example:
        subType: buttons
        components:
          header:
            type: text
            text: Your request is queued
          body:
           type: text
           text: How would you rate your bot experience
          footer:
            type: text
            text: Your service bot
          buttons:
            - type: reply
              reply:
                payload: 987298-40980jvkdm9-234234234
                title: Poor
            - type: reply
              reply:
                payload: 987298-dsfgjlkhgdf-dg09u834334
                title: OK
            - type: reply
              reply:
                payload: 9080923445nlkjÃŸ0_gÃŸ0923845083245dfg
                title: Good
    WhatsAppInteractiveListMessage:
      type: object
      description: |
        An interactive message type
      required:
        - subType
        - components
      properties:
        subType:
          type: string
          enum:
            - list
        components:
          $ref: '#/components/schemas/WhatsAppInteractiveListComponents'
      example:
        subType: list
        components:
          header:
            type: text
            text: Choose your menu
          body:
            type: text
            text: Hi Sarah, select your menu from the bottom list. Dressings and toppings are selected later on
          footer:
            type: text
            text: Your tyntec food team
          list:
            title: Your menu
            sections:
              - title: Vegan
                rows:
                  - title: Green dream
                    payload: green-dream-34987-234897234-234
                    description: A bowl full of tasty leaves, soy beans and cucumber
                  - title: Rainbow meets rice
                    payload: rainbow-meets-rice-34987-234897234-234
                    description: A colorful selection of vegetables on a cozy bed of basmati rice
              - title: Vegetarian
                rows:
                  - title: Italo Classic
                    payload: italo-classic-34987-234897234-234
                    description: Slices of tomatoes with plucked pieces of mozzarella and basil leaves
                  - title: Egg & Peas
                    payload: egg-and-peas-34987-234897234-234
                    description: Tasty slices of eggs on a whole wheat pasta salad with peas
    WhatsAppInteractiveProductMessage:
      type: object
      description: |
        Interactive Product Message
      required:
        - subType
        - components
      properties:
        subType:
          type: string
          description: Determines the type of interactive message. **Always** `product`
          enum:
            - product
        components:
          $ref: '#/components/schemas/WhatsAppInteractiveProductComponents'
      example:
        subType: product
        components:
          header:
            type: text
            text: What about?
          body:
            type: text
            text: According to your query, we found this matching product
          footer:
            type: text
            text: Your service bot
          product:
            catalogId: 123987987498123
            productId: My-Product-SKU
    WhatsAppInteractiveProductListMessage:
      type: object
      description: |
        Interactive Product List Message
      required:
        - subType
        - components
      properties:
        subType:
          type: string
          description: Determines the type of interactive message. **Always** `productList`
          enum:
            - productList
        components:
          $ref: '#/components/schemas/WhatsAppInteractiveProductListComponents'
      example:
        subType: productList
        components:
          header:
            type: text
            text: What about?
          body:
            type: text
            text: According to your query, we found this matching products
          footer:
            type: text
            text: Your service bot
          productList:
            catalogId: 12314123123
            sections:
              - title: Vegan
                items:
                  - productId: sku-1
                  - productId: sku-2
              - title: Vegetarian
                items:
                  - productId: sku-3
                  - productId: sku-4
    WhatsAppInteractiveLocationMessage:
      type: object
      description: |
        Interactive Location Message
      required:
        - subType
        - components
      properties:
        subType:
          type: string
          description: Determines the type of interactive message. **Always** `locationRequest`
          enum:
            - locationRequest
        components:
          $ref: '#/components/schemas/WhatsAppInteractiveLocationComponents'
      example:
        subType: locationRequest
        components:
          body:
            type: text
            text: Hi, please share your location with us by clicking the button below
    WhatsAppInteractiveFlowMessage:
      type: object
      description: |
        Interactive Flow Message
      required:
        - subType
        - components
      properties:
        subType:
          type: string
          description: Determines the type of interactive message. **Always** `flow`
          enum:
            - flow
        components:
          $ref: '#/components/schemas/WhatsAppInteractiveFlowComponents'
      example:
        subType: flow
        components:
          header:
            type: text
            text: Flow header component
          body:
            type: text
            text: Flow body component
          footer:
            type: text
            text: Flow footer component
          flow:
            flowToken: AQAAAAACS5FpgQ_cAAAAAD0QI3s.
            flowId: 1234567890123456
            flowCta: Click to see the flow
            flowAction: navigate
            flowActionPayload:
              screen: DETAILS
              data: { "product_name": "name", "product_description": "description", "product_price": 100 }
    WhatsAppInteractiveAddressMessage:
      type: object
      description: |
        Interactive Address Message. Only available in India and Singapore
      required:
        - subType
        - components
      properties:
        subType:
          type: string
          description: Determines the type of interactive message. **Always** `address`
          enum:
            - address
        components:
          $ref: '#/components/schemas/WhatsAppInteractiveAddressComponents'
      example:
        subType: address
        components:
          header:
            type: text
            text: Address header component
          body:
            type: text
            text: Address body component
          footer:
            type: text
            text: Address footer component
          address:
            country: IN
            values:
              name: Test name
              phoneNumber: +91012345678
              inPinCode: 123456
              houseNumber: 21
              floorNumber: 3
              address: Some address in India
              city: Mumbai
            savedAddresses:
              id: 1234
              value:
                name: Customer name
                phoneNumber: +91012345678
                inPinCode: 123456
                address: Some address in India
                city: Mumbai
            validationErrors:
              inPinCode: We could not locate this pin code.
    WhatsAppInteractiveButtonComponents:
      type: object
      required:
        - body
        - buttons
      properties:
        header:
          oneOf:
            - $ref: '#/components/schemas/WhatsAppTemplateTextHeaderComponent'
            - $ref: '#/components/schemas/WhatsAppTemplateImageHeaderComponent'
            - $ref: '#/components/schemas/WhatsAppTemplateVideoHeaderComponent'
            - $ref: '#/components/schemas/WhatsAppTemplateDocumentHeaderComponent'
        body:
          $ref: '#/components/schemas/WhatsAppInteractiveTextContent'
        footer:
          $ref: '#/components/schemas/WhatsAppInteractiveFooterContent'
        buttons:
          type: array
          minItems: 1
          maxItems: 3
          items:
            $ref: '#/components/schemas/WhatsAppInteractiveButton'
    WhatsAppInteractiveButton:
      type: object
      description: An interactive message button
      required:
        - type
        - reply
      properties:
        type:
          type: string
          description: The type of button. Always "reply"
          enum:
            - reply
        reply:
          type: object
          description: The reply button specification
          required:
            - payload
            - title
          properties:
            payload:
              type: string
              description: The ID of the reply button. Must be unique within the same messaging request
              minLength: 1
              maxLength: 256
            title:
              type: string
              description: The caption or title of the button
              maxLength: 24
              minLength: 1
    WhatsAppInteractiveListComponents:
      type: object
      description: |
        A list message component. It can have at most 10 rows distributed over at most 10 sections
      required:
        - body
        - list
      properties:
        header:
          $ref: '#/components/schemas/WhatsAppTemplateTextHeaderComponent'
        body:
          $ref: '#/components/schemas/WhatsAppInteractiveTextContent'
        footer:
          $ref: '#/components/schemas/WhatsAppInteractiveFooterContent'
        list:
          $ref: '#/components/schemas/WhatsAppInteractiveListContent'
    WhatsAppInteractiveListContent:
      type: object
      description: |
        A definition of a WhatsApp interactive list
      required:
        - title
        - sections
      properties:
        title:
          type: string
          maxLength: 24
          example: Choose from this list
        sections:
          type: array
          description: Sections of the list message
          minItems: 1
          maxItems: 10
          items:
            $ref: '#/components/schemas/WhatsAppListSection'
    WhatsAppListSection:
      type: object
      description: |
        A section of a list message.
      required:
        - rows
      properties:
        title:
          type: string
          description: The title of the section mandatory in case of multiple sections
          maxLength: 24
          minLength: 1
        rows:
          type: array
          description: Items of the section
          minItems: 1
          maxItems: 10
          items:
            $ref: '#/components/schemas/WhatsAppListSectionRow'
    WhatsAppListSectionRow:
      type: object
      description: A row item of a list message
      required:
        - payload
        - title
      properties:
        payload:
          type: string
          description: The ID of the item, must be unique within the request
          minLength: 1
          maxLength: 24
        title:
          type: string
          description: The caption of the item in the list
          minLength: 1
          maxLength: 24
        description:
          type: string
          description: An optional description of the item
          minLength: 1
          maxLength: 72

    WhatsAppInteractiveProductComponents:
      type: object
      description: An interactive Product Component
      required:
        - body
        - product
      properties:
        body:
          $ref: '#/components/schemas/WhatsAppInteractiveTextContent'
        footer:
          $ref: '#/components/schemas/WhatsAppInteractiveFooterContent'
        product:
          type: object
          description: A product specification to be sent to the customer
          required:
            - catalogId
            - productId
          properties:
            catalogId:
              description: The Catalog ID of the Facebook catalog, must be linked to the WhatsApp business account
              type: string
              example: "12432134"
            productId:
              description: The Own Product ID or SKU for the product. Must be configured on the Facebook catalog
              type: string
              example: Test SKU

    WhatsAppInteractiveProductListComponents:
      type: object
      description: |
        A Product List message component. It can have at most 30 products distributed over at most 10 sections
      required:
        - header
        - body
        - productList
      properties:
        header:
          $ref: '#/components/schemas/WhatsAppTemplateTextHeaderComponent'
        body:
          $ref: '#/components/schemas/WhatsAppInteractiveTextContent'
        footer:
          $ref: '#/components/schemas/WhatsAppInteractiveFooterContent'
        productList:
          $ref: '#/components/schemas/WhatsAppInteractiveProductListContent'
    WhatsAppInteractiveProductListContent:
      type: object
      description: |
        The definition of a WhatsApp product list
      required:
        - title
        - sections
      properties:
        catalogId:
          type: string
          description: The Catalog ID of the Facebook catalog, must be linked to the WhatsApp business account
          example: 2134432423
        sections:
          type: array
          description: Sections of the list message
          minItems: 1
          maxItems: 10
          items:
            $ref: '#/components/schemas/WhatsAppProductListSection'
    WhatsAppProductListSection:
        type: object
        description: |
          A section of a product list message.
        required:
          - items
        properties:
          title:
            type: string
            description: The title of the section mandatory in case of multiple sections
            maxLength: 24
            minLength: 1
          items:
            type: array
            description: Products of this section
            minItems: 1
            maxItems: 30
            items:
              $ref: '#/components/schemas/WhatsAppProductListItem'
    WhatsAppProductListItem:
      type: object
      description: A single item on the product list
      required:
        - productId
      properties:
        productId:
          description: The Own Product ID or SKU for the product. Must be configured on the Facebook catalog
          type: string
          example: Test SKU
    WhatsAppInteractiveLocationComponents:
      type: object
      description: |
        A Location message component. It contains only body text. Send location button that users can tap is automatically added.
      required:
        - body
      properties:
        body:
          $ref: '#/components/schemas/WhatsAppInteractiveTextContent'
    WhatsAppInteractiveFlowComponents:
      type: object
      description: |
        A Flow message components. It contains optional header and footer text component and mandatory body text and main flow component.
      required:
        - body
        - flow
      properties:
        header:
          $ref: '#/components/schemas/WhatsAppTemplateTextHeaderComponent'
        body:
          $ref: '#/components/schemas/WhatsAppInteractiveTextContent'
        footer:
          $ref: '#/components/schemas/WhatsAppInteractiveFooterContent'
        flow:
          $ref: '#/components/schemas/WhatsAppInteractiveFlowContent'
    WhatsAppInteractiveFlowContent:
      type: object
      description: |
        The definition of a WhatsApp Flow content
      required:
        - flowToken
        - flowId
        - flowCta
        - flowAction
      properties:
        mode:
          type: string
          description: The state of the flow being sent. The Flow can be in either `published` or `draft` mode. Default value is `published`.
          example: published
        flowToken:
          type: string
          description: Flow token that is generated by the user to serve as an identifier.
          example: AQAAAAACS5FpgQ_cAAAAAD0QI3s.
        flowId:
          type: string
          description: Unique ID of the Flow. ID is provided by Meta, and can be found on Meta's Business Manager.
          example: 1234567890123456
        flowCta:
          type: string
          description: Text on "Call to action" button that is going to start the flow.
          maxLength: 20 characters
          example: Click for the flow
        flowAction:
          type: string
          description: Possible values are `navigate` and `data_exchange`. Default value is `navigate`. Use navigate to predefine the first screen as part of the message. Use data_exchange for advanced use-cases where the first screen is provided by your endpoint.
          example: navigate
        flowActionPayload:
          type: object
          description: Required only if `flow_action is navigate`.
          required:
            - screen
          properties:
            screen:
              type: string
              description: The ID of the first Screen.
              example: SIGN_UP
            data:
              type: object
              description: Optional input data for the first Screen of the Flow.
              example:  { "product_name": "name", "product_price": 100 }
    WhatsAppInteractiveAddressComponents:
      type: object
      description: |
        A interactive address message components. It contains optional header and footer text component and mandatory body text and main address component.
      required:
        - body
        - address
      properties:
        header:
          $ref: '#/components/schemas/WhatsAppTemplateTextHeaderComponent'
        body:
          $ref: '#/components/schemas/WhatsAppInteractiveTextContent'
        footer:
          $ref: '#/components/schemas/WhatsAppInteractiveFooterContent'
        address:
          $ref: '#/components/schemas/WhatsAppInteractiveAddressContent'
    WhatsAppInteractiveAddressContent:
      type: object
      description: |
        The definition of a WhatsApp Address content
      required:
        - country
      properties:
        country:
          type: string
          description: Only available in India (IN) and Singapore (SG)
          example: IN
        values:
          $ref: '#/components/schemas/WhatsAppInteractiveBasicAddressValue'
        savedAddresses:
          type: object
          required:
            - id
            - value
          description: Saved addresses previously associated with the user.
          properties:
            id:
              type: string
              description: Id of saved address
              example: 12345
            value:
              $ref: '#/components/schemas/WhatsAppInteractiveBasicAddressValue'
        validationErrors:
          $ref: '#/components/schemas/WhatsAppInteractiveAddressValidationErrors'
    WhatsAppInteractiveBasicAddressValue:
      allOf:
        - $ref: '#/components/schemas/WhatsAppInteractiveBasicAddressValuePayload'
        - type: object
          properties:
            inPinCode:
              type: string
              description: String representation of pin code. Max size is 6 digits. Supported countries India
              maxLength: 6
            sgPostCode:
              type: string
              description: String representation of pin code. Max size is 6 digits. Supported countries Singapore
              maxLength: 6
    WhatsAppInteractiveAddressValidationErrors:
      description: Validations errors that will be thrown in order to validate address fields.
      allOf:
        - $ref: '#/components/schemas/WhatsAppInteractiveBasicAddressValuePayload'
        - type: object
          properties:
            inPinCode:
              type: string
              description: Error message for validating pin code
            sgPostCode:
              type: string
              description: Error message for validating pin code
    WhatsAppInteractiveBasicAddressValuePayload:
      type: object
      description: |
        A fields that represent address value. Some fields are available just for specific country.
      properties:
        name:
          type: string
          description: Supported countries India, Singapore
        phoneNumber:
          type: string
          description: Supported countries India, Singapore
        houseNumber:
          type: string
          description: Supported countries India, Singapore
        floorNumber:
          type: string
          description: Supported countries India, Singapore
        towerNumber:
          type: string
          description: Supported countries India, Singapore
        buildingName:
          type: string
          description: Supported countries India, Singapore
        address:
          type: string
          description: Supported countries India, Singapore
        landmarkArea:
          type: string
          description: Supported countries India
        unitNumber:
          type: string
          description: Supported countries Singapore
        city:
          type: string
          description: Supported countries India, Singapore
        state:
          type: string
          description: Supported countries India
    #
    # Profile
    #


    WhatsAppProfile:
      type: object
      description: |
        The current profile of a WhatsApp number.
      properties:
        address:
          type: string
          maxLength: 256
          description: The address of the business
          example: Hofmannstrasse 25 - 27, 81379 Munich, Germany
        description:
          type: string
          maxLength: 256
          description: A brief introduction of the business
          example: tyntec WhatsApp Business API Demo
        email:
          type: string
          maxLength: 128
          description: The contact mail address
          example: support@tyntec.com
        websites:
          type: array
          maxLength: 2
          items:
            type: string
            pattern: ^https:\/\/?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$
            maxLength: 256
          description: Websites of the business
          example:
            - https://www.tyntec.com
            - https://api.tyntec.com/reference
        vertical:
          type: string
          enum:
            - Automotive
            - Beauty, Spa and Salon
            - Clothing and Apparel
            - Education
            - Entertainment
            - Event Planning and Service
            - Finance and Banking
            - Food and Grocery
            - Public Service
            - Hotel and Lodging
            - Medical and Health
            - Non-profit
            - Professional Services
            - Shopping and Retail
            - Travel and Transportation
            - Restaurant
            - Other
          description: The industry of the business
          example: Professional Services
        about:
          type: string
          maxLength: 139
          description: Text to display in the _About_ section of your profile
          example: Hey there! I am using WhatsApp.
      example:
        address: Hofmannstrasse 25 - 27, 81379 Munich, Germany
        description: tyntec WhatsApp Business API Demo
        email: support@tyntec.com
        websites:
          - https://www.tyntec.com
          - https://api.tyntec.com/reference
        vertical: Professional Services
        about: Hey there! I am using WhatsApp.
    WhatsAppMessageStatusUpdate:
      type: object
      description: A change in the message status of a previously sent WhatsApp message
      properties:
        status:
          type: string
          description: WhatsApp message status
          enum:
            - read
    WhatsAppProfileLogoLink:
      type: object
      description: A link to the profile logo
      required:
        - link
      properties:
        link:
          type: string
          description: The link to the profile logo
          example: https://pps.whatsapp.net/v/123123
    WhatsAppCommerceSettings:
      type: object
      properties:
        enabled:
          type: boolean
    WhatsAppAccounts:
      type: array
      description: A list of WhatsApp Business Accounts. Might be empty
      items:
        $ref: '#/components/schemas/WhatsAppAccount'
    WhatsAppAccount:
      type: object
      description: A WhatsApp Business Account
      required:
        - whatsAppAccountId
      properties:
        whatsAppAccountId:
          type: string
          description: The ID of the WhatsApp Business Account
          format: uuid
          example:
            5637b8a7-51e1-47be-ad0b-b242453dcc1b
        whatsAppAccountName:
          type: string
          description: The name of the WhatsApp Business Account
          example:
            Swagger Sample Account
        businessName:
          type: string
          description: The name of the business owning the Facebook Business Manager
          example:
            Swagger Sample business
        templateNamespace:
          description: |
            A template namespace assigned to the WhatsApp Business Account.

            This is used internally and here stated for completeness.
          type: string
          example:
            c9468969-a3a3-4c17-95f7-1e8b2902ed74
        facebookBusinessManagerId:
          description: The Facebook Business Manager ID provided by Facebook
          type: number
          example: 1791147717848878
        whatsAppBusinessAccountId:
          description: The WhatsApp Business Account ID provided by WhatsApp
          type: string
          example: 24334545345345
        accountStatus:
          $ref: '#/components/schemas/WhatsAppAccountStatus'
        managedBy:
          description: The account that can manage (edit, ...) the entity
          allOf:
            - $ref: '#/components/schemas/CPaaSAccount'
      example:
        whatsAppAccountId: 5637b8a7-51e1-47be-ad0b-b242453dcc1b
        whatsAppAccountName: Swagger Sample Account
        businessName: Swagger Sample business
        templateNamespace: c9468969-a3a3-4c17-95f7-1e8b2902ed74
        facebookBusinessManagerId: 1791147717848878
        accountStatus:
          messageOnBehalf: PENDING
        managedBy:
          accountName: tynteccpaas
    WhatsAppPhoneNumbers:
      type: array
      description: A list of phone numbers on WhatsApp. Might be empty
      items:
        $ref: '#/components/schemas/WhatsAppPhoneNumber'
    WhatsAppPhoneNumber:
      type: object
      description: A phone number assigned to a WhatsApp Business Account
      properties:
        phoneNumber:
          type: string
          description: The phone number
          example:
            "49123456789"
        displayPhoneNumber:
          type: string
          description: The phone number as it is displayed in the app
          example:
            +49 123 456789
        verifiedName:
          type: string
          description: |
            The name shown next to the number.

            This name will be shown immediately for Official Business Accounts.
          example:
            Swagger Sample
        qualityRating:
          type: string
          description: |
            The current quality rating of the phone number.

            A RED rating will lead to the `flagged` status if the number keeps receiving
            negative feedback from users.
          enum:
            - GREEN
            - RED
            - YELLOW
          example:
            GREEN
        status:
          type: string
          description: The status of the number
          enum:
            - CONNECTED
            - PENDING
            - FLAGGED
            - RESTRICTED
            - OFFLINE
            - DISCONNECTED
          example:
            CONNECTED
        whatsAppAccountId:
          type: string
          description: The ID of the WhatsApp Business Account the number belongs to.
          format: uuid
          example: 5637b8a7-51e1-47be-ad0b-b242453dcc1b
        managedBy:
          description: The account that can manage (edit, ...) the entity
          allOf:
            - $ref: '#/components/schemas/CPaaSAccount'
        messagingVia:
          description: The account that must be used for messaging
          allOf:
            - $ref: '#/components/schemas/CPaaSAccount'
        messagingTier:
          type: string
          description: Which [messaging tier](https://developers.facebook.com/docs/whatsapp/api/rate-limits#messaging) the number is currently on
          enum:
            - TIER_NOT_SET
            - TIER_50
            - TIER_250
            - TIER_1K
            - TIER_10K
            - TIER_100K
            - UNLIMITED
        qualityScore:
          $ref: '#/components/schemas/QualityScore'
        nameStatus:
          type: string
          description: Status of Display Name approval by Meta
        isOfficialBusinessAccount:
          type: boolean
          description: True if this phone number is recognized as official business account by Meta (green checkmark badge)
      example:
        phoneNumber: "49123456789"
        displayPhoneNumber: +49 123 45678
        verifiedName: Swagger Sample
        qualityRating: YELLOW
        status: FLAGGED
        whatsAppAccountId: 5637b8a7-51e1-47be-ad0b-b242453dcc1b
        managedBy:
          accountName: tyntecscpaas
        messagingVia:
          accountName: messagingcpaas
        nameStatus: APPROVED
        isOfficialBusinessAccount: false
    CPaaSAccount:
      type: object
      description: The CPaaS account behind the API key
      properties:
        accountName:
          type: string
          description: The name of the CPaaSAccount
      example:
        accountName: someaccount
    WhatsAppTemplateRequest:
      type: object
      description: A request for an additional WhatsApp template
      required:
        - name
        - category
        - localizations
      properties:
        name:
          type: string
          description: The name of the template
        category:
          $ref: '#/components/schemas/TemplateCategory'
        localizations:
          type: array
          description: Localizations of the template
          items:
            $ref: '#/components/schemas/LocalizationRequest'
          minItems: 1
        allowCategoryChange:
          type: boolean
          description: If true, let Meta allow to change category
          default: false
    LocalizationRequest:
      type: object
      description: A request for a new localization of a template
      required:
        - language
        - components
      properties:
        language:
          $ref: '#/components/schemas/LanguageCode'
        components:
          description: Components defining the template
          oneOf:
            - $ref: '#/components/schemas/NotificationTemplateRequest'
            - $ref: '#/components/schemas/RichMediaTemplateRequest'
            - $ref: '#/components/schemas/CarouselTemplateRequest'
        messageSendTimeToLiveSeconds:
          type: integer
          required: false
          description: If WhatsApp is unable to deliver a message to a user, we will continue attempting to deliver the message for a period of time known as a time-to-live. 
                      Newly created authentication templates have a default time-to-live of 10 minutes. 
                      To override the default time-to-live when creating an authentication template set this field to value between 60 and 600 seconds.
                      Additionally, set -1 to set time-to-live to message default value. This will set time-to-live to 24 hours (or 30 days for On-Premises API).
          example: 60
    TemplatePatchRequest:
      type: object
      description: A request to edit an existing template
      properties:
        category:
          $ref: '#/components/schemas/TemplateCategory'
        components:
          description: Components defining the desired change in templates definition
          oneOf:
            - $ref: '#/components/schemas/NotificationTemplateRequest'
            - $ref: '#/components/schemas/RichMediaTemplateRequest'
            - $ref: '#/components/schemas/CarouselTemplateRequest'
    NotificationTemplateRequest:
      type: array
      description: A request for a standard template (notification) without rich media components

      items:
        type: object
        description: Standard template request without rich media parts
        required:
          - type
          - text
        properties:
          type:
            type: string
            description: The template component type. Always BODY
            enum:
              - BODY
            default: BODY
          text:
            type: string
            description: |
              Template text (1--1024 chars)
            maxLength: 1024
            minLength: 1
      maxLength: 1
      minLength: 1
    RichMediaTemplateRequest:
      type: array
      description: A rich media template definition. Must contain at least the body component
      items:
        anyOf:
          - $ref: '#/components/schemas/WhatsAppTemplateHeaderComponentRequest'
          - $ref: '#/components/schemas/WhatsAppTemplateBodyComponentRequest'
          - $ref: '#/components/schemas/WhatsAppTemplateFooterComponentRequest'
          - $ref: '#/components/schemas/WhatsAppTemplateButtonComponentRequest'
      minItems: 1
    CarouselTemplateRequest:
      type: array
      description: A carousel template definition. Must contain text body and carousel component
      items:
        anyOf:
          - $ref: '#/components/schemas/WhatsAppTemplateBodyComponentRequest'
          - $ref: '#/components/schemas/WhatsAppTemplateCarouselComponentRequest'
      example:
          [
            {
              type: "BODY",
              text: "Some bubble text"
            },
            {
              type: "CAROUSEL",
              cards: [
                {
                  components: [
                    {
                      type: "HEADER",
                      format: "IMAGE",
                      example: {
                        url: "image example url card1"
                      }
                    },
                    {
                      type: "BODY",
                      text: "Some body card1 text"
                    },
                    {
                      type: "BUTTONS",
                      buttons: [
                        {
                          type: "QUICK_REPLY",
                          text: "Send more like this card1"
                        },
                        {
                          type: "URL",
                          text: "Buy now card1",
                          url: "some url"
                        }
                      ]
                    }
                  ]
                },
                {
                  components: [
                    {
                      type: "HEADER",
                      format: "IMAGE",
                      example: {
                        url: "image example url card2"
                      }
                    },
                    {
                      type: "BODY",
                      text: "Some body card2 text"
                    },
                    {
                      type: "BUTTONS",
                      buttons: [
                        {
                          type: "QUICK_REPLY",
                          text: "Send more like this card2"
                        },
                        {
                          type: "URL",
                          text: "Buy now card2",
                          url: "some url"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
    WhatsAppTemplateHeaderComponentRequest:
      type: object
      description: A header component of a template
      oneOf:
        - $ref: '#/components/schemas/WhatsAppTemplateTextHeaderComponentRequest'
        - $ref: '#/components/schemas/WhatsAppTemplateMediaHeaderComponentRequest'
        - $ref: '#/components/schemas/WhatsAppTemplateLocationHeaderComponentRequest'
    WhatsAppTemplateTextHeaderComponentRequest:
      type: object
      description: A text header component of a template
      required:
        - type
        - format
        - text
        - example
      properties:
        type:
          type: string
          description: Determines the type of the component. Always HEADER
          enum:
            - HEADER
          example: HEADER
        format:
          type: string
          description: What kind of header
          enum:
            - TEXT
          example:
            TEXT
        text:
          type: string
          description: The text that should be displayed as the header. Can contain 1 variable
          maxLength: 60
          example: Hi {{1}}
        example:
          $ref: '#/components/schemas/WhatsAppTemplateTextHeaderComponentRequestExample'
      example:
        type: HEADER
        format: TEXT
        text: Hi {{1}}
        example:
          text: John Doe
    WhatsAppTemplateTextHeaderComponentRequestExample:
      type: object
      description: An example of the header text
      properties:
        text:
          type: string
          maxLength: 60
          description: An example text
          example: John Doe
    WhatsAppTemplateLocationHeaderComponentRequest:
      type: object
      description: A location header component of a template
      required:
        - type
        - format
      properties:
        type:
          type: string
          description: Determines the type of the component. Always HEADER
          enum:
            - HEADER
          example: HEADER
        format:
          type: string
          description: What kind of header
          enum:
            - LOCATION
          example:
            LOCATION
    WhatsAppTemplateMediaHeaderComponentRequest:
      type: object
      description: A media header component of a template
      required:
        - type
        - format
        - example
      properties:
        type:
          type: string
          description: Determines the type of the component. Always HEADER
          enum:
            - HEADER
        format:
          type: string
          description: What kind of header
          enum:
            - IMAGE
            - DOCUMENT
            - VIDEO
          example:
            IMAGE
        example:
          $ref: '#/components/schemas/WhatsAppTemplateMediaHeaderComponentRequestExample'
      example:
        type: HEADER
        format: IMAGE
        example:
          url: https://www.my.com/image.jpg
    WhatsAppTemplateMediaHeaderComponentRequestExample:
      type: object
      description: An example of a media
      properties:
        url:
          type: string
          maxLength: 255
          description: The URL of the example media file
          pattern: ^https?:\/\/?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+
          example: https://www.my.com/image.jpg
    WhatsAppTemplateBodyComponentRequest:
      type: object
      description: A body component of a template
      required:
        - type
      properties:
        type:
          type: string
          description: Determines the type of the component. Always BODY
          enum:
            - BODY
        text:
          type: string
          description: The specification of the body text (1--1024 chars). Mandatory for all non-authentication templates
          maxLength: 1024
          minLength: 1
          example:
            Hi {{1}}! Enjoy the spec!
        addSecurityRecommendation:
          type: boolean
          description: Only used for AUTHENTICATION templates. Adds security recommendation to the default OTP text.
        example:
          $ref: '#/components/schemas/WhatsAppTemplateBodyComponentRequestExample'
      example:
        type: BODY
        text: Hi {{1}}, your order {{2}} is shipped
        example:
          texts:
           - John Doe
           - 123
    WhatsAppTemplateBodyComponentRequestExample:
      type: object
      description: Examples of body parameters. All parameters of the body must have an example
      required:
        - texts
      properties:
        texts:
          type: array
          description: Examples of body parameters
          items:
            type: string
            maxLength: 100
          example:
            - John Doe
            - Order ID 123

    WhatsAppTemplateFooterComponentRequest:
      type: object
      description: A footer component of a template
      required:
        - type
      properties:
        type:
          type: string
          description: Determines the type of the component
          enum:
            - FOOTER
        text:
          type: string
          description: The specification of the footer text (1--60 chars). Mandatory for all non-authentication templates
          maxLength: 60
          minLength: 1
          example:
            The specification team
        codeExpirationMinutes:
          type: integer
          description: Only used in AUTHENTICATION templates. Adds an expiration note to the default OTP text.
          maximum: 90
    WhatsAppTemplateButtonComponentRequest:
      type: object
      description: A button component of a template
      required:
        - type
        - buttons
      properties:
        type:
          type: string
          description: Determines the type of the component
          enum:
            - BUTTONS
        buttons:
          oneOf:
            - $ref: '#/components/schemas/WhatsAppQuickReplyButtonsRequest'
            - $ref: '#/components/schemas/WhatsAppCallToActionButtonsRequest'
            - $ref: '#/components/schemas/WhatsAppOtpButtonsRequest'
            - $ref: '#/components/schemas/WhatsAppFlowButtonsRequest'
    WhatsAppQuickReplyButtonsRequest:
      type: array
      description: Quick Reply buttons
      items:
        $ref: '#/components/schemas/WhatsAppQuickReplyButton'
      minItems: 1
      maxItems: 3
    WhatsAppQuickReplyButton:
      type: object
      description: A quick reply button, when clicked the caption and the dynamic payload are returned.
      required:
        - type
        - text
      properties:
        type:
          type: string
          description: The type of this button
          enum:
            - QUICK_REPLY
          example: QUICK_REPLY
        text:
          type: string
          description: The caption of the button
          maxLength: 20
          minLength: 1
          example: I liked it!
    WhatsAppOtpButtonsRequest:
      type: array
      description: OTP buttons
      items:
        anyOf:
          - $ref: '#/components/schemas/WhatsAppCopyCodeOtpButton'
          - $ref: '#/components/schemas/WhatsAppOneTapOtpButton'
          - $ref: '#/components/schemas/WhatsAppZeroTapOtpButton'
      minItems: 1
      maxItems: 1
    WhatsAppCopyCodeOtpButton:
      type: object
      description: A copy code button. When clicked, the code is copied to handsets clipboard.
      required:
        - type
        - otpType
        - text
      properties:
        type:
          type: string
          description: The type of this button, 'OTP'
          enum:
            - OTP
          example: OTP
        otpType:
          type: string
          description: The subtype of this button, 'COPY_CODE'
          enum:
            - COPY_CODE
        text:
          type: string
          description: The caption of the copy code button.
          maxLength: 25
          minLength: 1
          example: Copy code.
    WhatsAppOneTapOtpButton:
      type: object
      description: A one-tap otp button. Only works for android at the moment, see https://developers.facebook.com/docs/whatsapp/business-management-api/authentication-templates#handshake
      required:
        - type
        - otpType
        - text
        - autofillText
        - packageName
        - signatureHash
      properties:
        type:
          type: string
          description: The type of this button, 'OTP'
          enum:
            - OTP
          example: OTP
        otpType:
          type: string
          description: The subtype of this button, 'ONE_TAP'
          enum:
            - ONE_TAP
        text:
          type: string
          description: The caption of the fallback copy code button, if one-tap is not available.
          maxLength: 25
          minLength: 1
          example: Copy code.
        autofillText:
          type: string
          description: The caption of the autofill button.
          maxLength: 25
          minLength: 1
          example: Autofill
        packageName:
          type: string
          description: Your android app's package name.
        signatureHash:
          type: string
          description: Your app signing key hash.
    WhatsAppZeroTapOtpButton:
      type: object
      description: A zero-tap otp button. Only works for android at the moment, see https://developers.facebook.com/docs/whatsapp/business-management-api/authentication-templates#handshake
      required:
        - type
        - otpType
        - packageName
        - signatureHash
        - zeroTapTermsAccepted
      properties:
        type:
          type: string
          description: The type of this button, 'OTP'
          enum:
            - OTP
          example: OTP
        otpType:
          type: string
          description: The subtype of this button, 'ZERO_TAP'
          enum:
            - ZERO_TAP
        text:
          type: string
          description: The caption of the fallback copy code button, if zero-tap is not available.
          maxLength: 25
          minLength: 1
          example: Copy code.
        autofillText:
          type: string
          description: The caption of the autofill button.
          maxLength: 25
          minLength: 1
          example: Autofill
        packageName:
          type: string
          description: Your android app's package name.
        signatureHash:
          type: string
          description: Your app signing key hash.
        zeroTapTermsAccepted:
          type: boolean
          description: Set to true to indicate that you understand and accept zero-tap authentication policy. 
                       If set to false, the template will not be created as you need to accept zero-tap terms before creating zero-tap enabled message templates.
    WhatsAppCallToActionButtonsRequest:
      type: array
      description: Call to action buttons. At most one of each button type can be used.
      items:
        anyOf:
          - $ref: '#/components/schemas/WhatsAppURLButton'
          - $ref: '#/components/schemas/WhatsAppPhoneNumberButton'
      minItems: 1
      maxItems: 2
    WhatsAppURLButton:
      type: object
      description: A call to action button that opens the specified URL when clicked
      required:
        - type
        - text
        - example
      properties:
        type:
          type: string
          description: The type of this button
          enum:
            - URL
          example: URL
        text:
          type: string
          description: The caption of the button
          maxLength: 20
          minLength: 1
          example: Your invoice
        url:
          type: string
          description: The URL that will be openend when clicking on the button. Can contain 1 parameter at the end.
          pattern: ^https?:\/\/?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+(\{\{1\}\})?
          example: https://www.myservice.com/invoices/{{1}}
        example:
          $ref: '#/components/schemas/WhatsAppURLButtonExample'
      example:
        type: URL
        text: Your invoice
        url: https://www.myservice.com/invoices/{{1}}
        example:
          url: https://www.myservice.com/invoices/9424a5c5-9089-4142-9cd2-0365383ce387.pdf
    WhatsAppURLButtonExample:
      type: object
      description: An example of a **dynamic** URL button.
      properties:
        url:
          type: string
          description: An example of a **dynamic** URL button. Must start with the same base url as the url button
          maxLength: 255
          pattern: ^https?:\/\/?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+
          example: https://www.myservice.com/invoices/9424a5c5-9089-4142-9cd2-0365383ce387.pdf
    WhatsAppPhoneNumberButton:
      type: object
      description: A call to action button that initiates a call when clicked
      required:
        - type
        - text
      properties:
        type:
          type: string
          description: The type of this button
          enum:
            - PHONE_NUMBER
          example: PHONE_NUMBER
        text:
          type: string
          description: The caption for this button
          maxLength: 20
          minLength: 1
          example: Call us
        phoneNumber:
          type: string
          description: The phone number that will be called when clicking on the button.
          pattern: ^\+\d{4,23}$
          example: "+4923147790813"
    WhatsAppFlowButtonsRequest:
      type: array
      description: Flows buttons
      items:
        oneOf:
          - $ref: '#/components/schemas/WhatsAppFlowButton'
      minItems: 1
      maxItems: 1
    WhatsAppFlowButton:
      type: object
      description: A flow button that opens the specified flow defined under flowId in Meta's business manager
      required:
        - type
        - text
        - flowId
        - flowAction
      properties:
        type:
          type: string
          description: The type of this button. Always `FLOW`
          enum:
            - FLOW
          example: FLOW
        text:
          type: string
          description: The caption of the button
          maxLength: 25
          minLength: 1
          example: Click for the flow
        flowId:
          type: string
          description: The unique ID of a Flow from Meta's Business manager
          example: 1234567890123456
        flowAction:
          type: string
          description: Possible values are `navigate` and `data_exchange`. Default value is `navigate`. Use navigate to predefine the first screen as part of the message. Use data_exchange for advanced use-cases where the first screen is provided by your endpoint.
          example: navigate
        navigateScreen:
          type: string
          description: Required if `flowAction is navigate`. The unique ID of the Screen in the Flow.
          example: details
    WhatsAppTemplateCarouselComponentRequest:
      type: object
      description: A carousel component of a template
      required:
        - type
        - cards
      properties:
        type:
          type: string
          description: Determines the type of the component
          enum:
            - CAROUSEL
        cards:
          oneOf:
            - $ref: '#/components/schemas/WhatsAppTemplateCards'
    WhatsAppTemplateCards:
      type: array
      description: Carousel cards definition. Must contain at least one card component, maximum 10.
      items:
        oneOf:
          - $ref: '#/components/schemas/WhatsAppTemplateCardComponent'
      minItems: 1
      maxItems: 10
    WhatsAppTemplateCardComponent:
      type: object
      description: A template card object. Must have media header (image or video), text body, and buttons components. Footer component is not allowed. 
                   Minimum one button, maximum two are allowed. Buttons can be the same or a mix of type quickly_reply, url or phone_numbers are allowed.
                   Media header format and button types must be the same across all cards that make up a carousel template.
      required:
        - components
      properties:
        components:
          description: Components defining the carousel card.
          oneOf:
            - $ref: '#/components/schemas/CarouselCardComponents'
    CarouselCardComponents:
      type: array
      description: A carousel card components definition. Must have media header (image or video), text body, and buttons components. Footer component is not allowed.
      items:
        anyOf:
          - $ref: '#/components/schemas/WhatsAppTemplateMediaHeaderComponentRequest'
          - $ref: '#/components/schemas/WhatsAppTemplateBodyComponentRequest'
          - $ref: '#/components/schemas/WhatsAppCarouselTemplateButtonComponentRequest'
      minItems: 3
      maxItems: 3
    WhatsAppCarouselTemplateButtonComponentRequest:
      type: object
      description: A button component of a carousel template. Allowed buttons are quick_reply, url or phone_numbers. 
                  Must have at least one button, maximum two.
      required:
        - type
        - buttons
      properties:
        type:
          type: string
          description: Determines the type of the component
          enum:
            - BUTTONS
        buttons:
          anyOf:
            - $ref: '#/components/schemas/WhatsAppQuickReplyButton'
            - $ref: '#/components/schemas/WhatsAppURLButton'
            - $ref: '#/components/schemas/WhatsAppPhoneNumberButton'
          minItems: 1
          maxItems: 2
    WhatsAppTemplates:
      type: array
      description: A list of WhatsApp templates
      items:
        $ref: '#/components/schemas/WhatsAppTemplateResponse'
    WhatsAppTemplateResponse:
      type: object
      description: A WhatsApp template
      properties:
        whatsAppAccountId:
          type: string
          description: The ID of the WhatsApp Business Account the template belongs to.
          format: uuid
          example: 5637b8a7-51e1-47be-ad0b-b242453dcc1b
        templateName:
          type: string
          description: The name of the template
          example:
            swagger_test
        templateId:
          type: string
          description: The ID of the template
          example:
            swagger_test
        category:
          $ref: '#/components/schemas/TemplateCategory'
        localÃ­zations:
          type: array
          description: The list of localizations of this template
          items:
            $ref: '#/components/schemas/LocalizationResponse'
          example:
            status: REJECTED
            rejectionReason: For this example
            language: en
            messageSendTimeToLiveSeconds: 120
            components:
              - type: BODY
                text: Hello {{1}}! How is going?
              - type: FOOTER
                text: Your specification team!
      example:
        whatsAppAccountId: 5637b8a7-51e1-47be-ad0b-b242453dcc1b
        templateName: swagger_test
        category: MARKETING
        localizations:
          - status: REJECTED
            rejectionReason: For this example
            language: en
            components:
              - type: BODY
                text: Hello {{1}}! How is going?
              - type: FOOTER
                text: Your specification team!
    LocalizationResponse:
      type: object
      description: A localization of a template
      required:
        - status
        - language
        - components
        - createdAt
        - lastUpdated
      properties:
        status:
          type: string
          description: |
            The status of the localization.
          enum:
            - REQUESTED
            - SUBMIT_FAILED
            - PENDING
            - APPROVED
            - REJECTED
            - DELETION_PENDING
            - DELETED
            - SUBMITTED
          example:
            DELETED
        rejectionReason:
          type: string
          description: The descriptive text in the case the status is REJECTED
          example:
            not yet
        language:
          $ref: '#/components/schemas/LanguageCode'
        components:
          type: array
          description: A set of components defining a template
          items:
            anyOf:
              - $ref: '#/components/schemas/WhatsAppTemplateHeaderComponentResponse'
              - $ref: '#/components/schemas/WhatsAppTemplateBodyComponentResponse'
              - $ref: '#/components/schemas/WhatsAppTemplateFooterComponentResponse'
          example:
            - type: BODY
              text: Hello {{1}}! How is going?
        createdAt:
          type: string
          description: At which point in time the template was created
          format: date-time
          example: 2020-02-15T23:28:34.442Z
        lastUpdated:
          type: string
          description: At which point in time the last update happened
          format: date-time
          example: 2020-02-15T25:28:34.442Z
        expiresAt:
          type: string
          description: |
            When the localization expires.
            Only present when a template was deleted.
          format: date-time
          example: 2020-03-15T23:28:34.442Z
        qualityScore:
          $ref: '#/components/schemas/QualityScore'
        messageSendTimeToLiveSeconds:
          type: integer
          description: If WhatsApp is unable to deliver a message to a user, we will continue attempting to deliver the message for a period of time known as a time-to-live.
                        Newly created authentication templates have a default time-to-live of 10 minutes.
                        Possible values for an authentication template is value between 60 and 600 seconds.
                        Additionally, -1 is set time-to-live for message default value (24 hours Cloud API or 30 days for On-Premises API).
          example: 120
    WhatsAppTemplateHeaderComponentResponse:
      type: object
      description: A header component of a template
      required:
        - type
        - format
      properties:
        type:
          type: string
          description: A component type
          enum:
            - HEADER
        format:
          type: string
          description: What kind of header
          enum:
            - IMAGE
            - TEXT
            - DOCUMENT
            - VIDEO
          example:
            IMAGE
        text:
          type: string
          description: The textual part in the case the format is TEXT
          example: Hi {{1}}!
    WhatsAppTemplateBodyComponentResponse:
      type: object
      description: A body component of a template
      required:
        - type
        - text
      properties:
        type:
          type: string
          description: A component type
          enum:
            - BODY
        text:
          type: string
          description: The specification of the body text
          example:
            Hi {{1}}! Enjoy the spec!
    WhatsAppTemplateFooterComponentResponse:
      type: object
      description: A footer component of a template
      required:
        - type
      properties:
        type:
          type: string
          description: A component type
          enum:
            - FOOTER
        text:
          type: string
          description: The specification of the footer text
          example:
            The specification team
    TemplateCategory:
      type: string
      description: The category of the template
      enum:
        - MARKETING
        - UTILITY
        - AUTHENTICATION
    LanguageCode:
      type: string
      description: The supported language codes, according to [Supported Languages](https://developers.facebook.com/docs/whatsapp/business-management-api/message-templates)
      enum:
        - af
        - ar
        - az
        - bg
        - bn
        - ca
        - cs
        - da
        - de
        - el
        - en
        - en_GB
        - en_US
        - es
        - es_AR
        - es_ES
        - es_MX
        - et
        - fa
        - fi
        - fil
        - fr
        - ga
        - gu
        - ha
        - he
        - hi
        - hr
        - hu
        - ID
        - it
        - ja
        - ka
        - kk
        - kn
        - ko
        - ky_KG
        - lo
        - lt
        - lv
        - mk
        - ml
        - mr
        - ms
        - nb
        - nl
        - pa
        - pl
        - pt_BR
        - pt_PT
        - ro
        - ru
        - rw_RW
        - sk
        - sl
        - sq
        - sr
        - sv
        - sw
        - ta
        - te
        - th
        - tr
        - uk
        - ur
        - uz
        - vi
        - zh_CN
        - zh_HK
        - zh_TW
        - zu
      example:
        en
    WhatsAppAccountStatus:
      type: object
      description: Status information for the WhatsApp account
      properties:
        messageOnBehalf:
          type: string
          description: Indicates the status of a message on behalf request
          enum:
            - PENDING
            - APPROVED
            - DENIED
      example:
        messageOnBehalf: APPROVED
    PaginationLinkRelation:
      type: string
      description: |
        What kind of relation is this link.

        The relations are defined as follows:

        - `first` â€“ The first page in the resource list pagination
        - `previous` â€“ The preceding page in the resource list pagination
        - `current` â€“ The current page in the resource list pagination
        - `next` â€“ The following page in the resource list pagination
        - `last` â€“ The last page in the resource list pagination

      enum:
        - first
        - previous
        - current
        - next
        - last
    WhatsAppChannelResponse:
      $ref: './configurations.yaml#/components/schemas/WhatsAppChannelResponse'
    WhatsAppChannelResponses:
      $ref: './configurations.yaml#/components/schemas/WhatsAppChannelResponses'
    ChannelCallback:
      $ref: './configurations.yaml#/components/schemas/ChannelCallback'
    QualityScore:
      type: object
      description: The quality score provided by WhatsApp and calculated from user feedback on your messages
      required:
        - score
      properties:
        score:
          type: string
          description: The current scoring
          enum:
            - unknown
            - GREEN
            - YELLOW
            - RED
        reasons:
          type: array
          description: |
            A textual description of why the quality score is set to the value.
            Only present when the score is YELLOW or RED
          items:
            type: string
      example:
        score: RED
        reasons:
          - Users are choosing "didn't sign up" as a reason for blocking this phone number. Businesses must obtain opt-in before sending notifications. Please review your opt-in flow(s) and see our Business Policy for more detail.
    WhatsAppFlows:
      type: array
      description: A list of WhatsApp flows
      items:
        $ref: '#/components/schemas/WhatsAppBasicFlow'
    WhatsAppBasicFlow:
      type: object
      description: A WhatsApp basic flow info
      properties:
        id:
          type: string
          description: The ID of the WhatsApp Flow.
          example: 1234567890123456
        name:
          type: string
          description: The name of the flow
          example: Test flow
        status:
          type: string
          description: Status of the flow
          enum:
            - DRAFT
            - DEPRECATED
            - PUBLISHED
          example: DRAFT
        categories:
          type: array
          description: A list of Flow categories. Flow must have at least one category
          items:
            anyOf:
              - $ref: '#/components/schemas/FlowCategory'
          example:
            error: ["SIGN_UP", "OTHER"]
        validationErrors:
          type: array
          description: The list of flow validation errors. List is empty if the flow has no errors.
          items:
            $ref: '#/components/schemas/FlowValidationError'
          example:
            error: INVALID_PROPERTY
            errorType: JSON_SCHEMA_ERROR
            message: The property 'initial-text' cannot be specified
            lineStart: 46
            lineEnd: 46
            columnStart: 17
            columnEnd: 30
      example:
        id: 12345678901234
        name: Flow test
        status: DRAFT
        categories:
          - OTHER
        validationErrors: []
    WhatsAppFlowDetail:
      type: object
      description: A WhatsApp flow detail info
      properties:
        id:
          type: string
          description: The ID of the WhatsApp Flow.
          example: 1234567890123456
        name:
          type: string
          description: The name of the flow
          example: Test flow
        status:
          type: string
          description: Status of the flow
          enum:
            - DRAFT
            - DEPRECATED
            - PUBLISHED
          example: DRAFT
        categories:
          type: array
          description: A list of Flow categories. Flow must have at least one category
          items:
            anyOf:
              - $ref: '#/components/schemas/FlowCategory'
          example: ["SIGN_UP", "OTHER"]
        validationErrors:
          type: array
          description: The list of flow validation errors. List is empty if the flow has no errors.
          items:
            $ref: '#/components/schemas/FlowValidationError'
          example:
            error: INVALID_PROPERTY
            errorType: JSON_SCHEMA_ERROR
            message: The property 'initial-text' cannot be specified
            lineStart: 46
            lineEnd: 46
            columnStart: 17
            columnEnd: 30
        jsonVersion:
          type: string
          description: The version specified by the developer in the Flow JSON asset uploaded.
          example: 3.0
        dataApiVersion:
          type: string
          description: The version of the Data API specified by the developer in the Flow JSON asset uploaded. Only for Flows with an Endpoint.
          example: 3.0
        endpointUri:
          type: string
          description: The URL of the WA Flow Endpoint specified by the developer via API or in the Builder UI.
          example: Test flow
        preview:
          $ref: '#/components/schemas/WhatsAppFlowPreview'
    FlowValidationError:
      type: object
      description: A validation error of a flow
      properties:
        error:
          type: string
          description: Error name of the flow
          example: INVALID_PROPERTY
        errorType:
          type: string
          description: Type of the error
          example: JSON_SCHEMA_ERROR
        message:
          type: string
          description: Error message
          example: The property 'initial-text' cannot be specified
        lineStart:
          type: string
          description: The line where error starts, in json flow
          example: 46
        lineEnd:
          type: string
          description: The line where error ends, in json flow
          example: 46
        columnStart:
          type: string
          description: The column where error starts, in json flow
          example: 17
        columnEnd:
          type: string
          description: The column where error ends, in json flow
          example: 30
    FlowCategory:
      type: string
      description: Flow's category
      enum:
        - SIGN_UP
        - SIGN_IN
        - APPOINTMENT_BOOKING
        - LEAD_GENERATION
        - CONTACT_US
        - CUSTOMER_SUPPORT
        - SURVEY
        - OTHER
    WhatsAppFlowPreview:
      type: object
      description: A WhatsApp flow preview link to visualize the flow and its expiry time.
      properties:
        previewUrl:
          type: string
          description: Link for the preview page. This link is public, but it will expire in 30 days, or if you call the API with invalidate=true which will generate a new link.
          example: https://previewLink.com/flows/1234567890123/preview/?token=bf747eb7
        expiresAt:
          type: string
          description: Time when the link will expire and the developer needs to call the API again to get a new link (30 days from link creation).
          example: 2024-02-21T15:15:32+0000
    CreateFlow:
      type: object
      description: Create flow response
      properties:
        flowId:
          type: string
          description: The ID of the WhatsApp Flow.
          example: 1234567890123456
    WhatsAppFlowAssets:
      type: array
      description: A list of Flow assets
      items:
        $ref: '#/components/schemas/WhatsFlowAsset'
    WhatsFlowAsset:
      type: object
      description: A WhatsApp basic flow info
      properties:
        name:
          type: string
          description: Asset name
          example: flow.json
        assetType:
          type: string
          description: Asset type. Always FLOW_JSON
          example: FLOW_JSON
        downloadUrl:
          type: string
          description: The url to download json asset
          example: https://scontent.xx.fbcdn.net/m1/v/test